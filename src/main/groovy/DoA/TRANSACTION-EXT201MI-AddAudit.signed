{"signature":"Ak4JOrkN/y/ChmTb2iuU90uo4PF/xS06z2o2Z3WeYjjBGV8CMmEAeAmBHO2ugDBR3ux+fn6b+6bSzqaqOx8UIZS9Xg7t0BhNYJfILZDX0pnDJR+Y+BxUnceB8u1kWkPk6+xXFSwwcykq0FqciIw8xaX6ZzxFOkG2tSZxyg2Ur0ndvLCv6Vcxe0J8Jwe367lQTJDx+uDc26RIqfg298mtCGZ+FhslEEB41zUNSSeToRd+eW3WAicT9GyBDIrvd2F8Fq/fAZ/iG3WrOwpIFOUGzaYMNHZF3iZXkAknHHUBHf380dnM5DMlvcAigkD365ynyJKL4k2bfQNMidHBeVtpNDlj5pFZ0F1PstE75SwefWwi5fOVbc41NzBMjoLUOfjklWxKPUJUAzQt6gW81amKlQTqytbws45niCysj8uz2aO7L/fQ0+p6ONaPvyIBx11Ie9p0g1Nq1FAz+xWatqyN9W+vncXL4jZ7JGdh3ACPpg4Qpw1nNpB/pw7oLl7yhQLfkG7lAuJ5E+v7PtTecnZKMNJYHPedCWMANfKGThiHZMdN90ooRfpoiysiTzAmSZhXVmxN1eddF9g/iMluIZadEwAJZ5T0+DA6Z8jTdnGU9sgKaQczbxsE5M70HboDbfFwSODfCaUToms3Shm7N6FI8/6YrAjGcFhgs9+LiH5aJ2g7","signedBy":"XtendM3 Team","signed":1743038717437,"message":"Signed by XtendM3 Team","extension":"{\"programModules\":{\"EXT201MI\":{\"program\":\"EXT201MI\",\"triggers\":{},\"transactions\":{\"AddAudit\":{\"sourceUuid\":\"16196fa5-cf58-4be3-b584-efd49d6c9ca3\",\"name\":\"AddAudit\",\"program\":\"EXT201MI\",\"description\":\"Workflow Audit Trail\",\"active\":true,\"multi\":false,\"modified\":1742862234907,\"modifiedBy\":\"WLAM\",\"outputFields\":[],\"inputFields\":[{\"name\":\"CONO\",\"description\":\"Company\",\"length\":3,\"mandatory\":true,\"type\":\"N\"},{\"name\":\"DIVI\",\"description\":\"Division\",\"length\":3,\"mandatory\":true,\"type\":\"A\"},{\"name\":\"WFNM\",\"description\":\"Workflow Name\",\"length\":50,\"mandatory\":true,\"type\":\"A\"},{\"name\":\"PUNO\",\"description\":\"Purchase order number\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PNLI\",\"description\":\"Purchase Order Line\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PNLS\",\"description\":\"Purchase order line subnumber\",\"length\":5,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"SUNO\",\"description\":\"Supplier\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"SINO\",\"description\":\"Supplier invoice number\",\"length\":24,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"INYR\",\"description\":\"Invoice year\",\"length\":4,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"REPN\",\"description\":\"Receiving number\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"APPR\",\"description\":\"Approver\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"ACTA\",\"description\":\"Workflow Action\",\"length\":20,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"SUNM\",\"description\":\"Supplier Name\",\"length\":40,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"ITNO\",\"description\":\"Item No\",\"length\":15,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PUPR\",\"description\":\"Purchase Price\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"LNAM\",\"description\":\"Line amount - Currency\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"LAMT\",\"description\":\"Line amount - Local Currency\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"CUCD\",\"description\":\"Currency\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"APRO\",\"description\":\"Approver Role\",\"length\":80,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"APLI\",\"description\":\"Approver Limit\",\"length\":15,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PURC\",\"description\":\"Requisitioner\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"AIT1\",\"description\":\"Account\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"AIT2\",\"description\":\"Cost Centre\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"AIT3\",\"description\":\"Unit\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"AIT4\",\"description\":\"Component\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"AIT5\",\"description\":\"Sub Account\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"AIT6\",\"description\":\"Project\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"AIT7\",\"description\":\"Element\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"ORQA\",\"description\":\"Quantity\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"RORN\",\"description\":\"WO Number\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CPPR\",\"description\":\"Confirm Price\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"CAMT\",\"description\":\"Confirm Amount - Currency\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"SITE\",\"description\":\"Supplier Item No\",\"length\":30,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"RESP\",\"description\":\"User Responsible\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CRID\",\"description\":\"Created By\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CLAM\",\"description\":\"Confirm Amount - Local Currency\",\"length\":15,\"mandatory\":false,\"type\":\"N\"}],\"utilities\":[]}},\"batches\":{}}},\"utilities\":{},\"sources\":{\"16196fa5-cf58-4be3-b584-efd49d6c9ca3\":{\"uuid\":\"16196fa5-cf58-4be3-b584-efd49d6c9ca3\",\"updated\":1742862303843,\"updatedBy\":\"WLAM\",\"created\":1742774087093,\"createdBy\":\"WLAM\",\"apiVersion\":\"0.9\",\"beVersion\":\"16.0.0.20250122200256.4\",\"codeHash\":\"422767F8F70A7CA94BACE8EE3DF201BAA593D3E7A03BE562DC9F811C28E0EE7A\",\"code\":\"LyoNCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9USUNFICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICAgVEhJUyBTT0ZUV0FSRSBJUyBUSEUgUFJPUEVSVFkgT0YgQU5EIENPTlRBSU5TICAgICAgICAgICAgICoNCiAqICAgQ09ORklERU5USUFMIElORk9STUFUSU9OIE9GIElORk9SIEFORC9PUiBJVFMgQUZGSUxJQVRFUyAgICoNCiAqICAgT1IgU1VCU0lESUFSSUVTIEFORCBTSEFMTCBOT1QgQkUgRElTQ0xPU0VEIFdJVEhPVVQgUFJJT1IgICoNCiAqICAgV1JJVFRFTiBQRVJNSVNTSU9OLiBMSUNFTlNFRCBDVVNUT01FUlMgTUFZIENPUFkgQU5EICAgICAgICoNCiAqICAgQURBUFQgVEhJUyBTT0ZUV0FSRSBGT1IgVEhFSVIgT1dOIFVTRSBJTiBBQ0NPUkRBTkNFIFdJVEggICoNCiAqICAgVEhFIFRFUk1TIE9GIFRIRUlSIFNPRlRXQVJFIExJQ0VOU0UgQUdSRUVNRU5ULiAgICAgICAgICAgICoNCiAqICAgQUxMIE9USEVSIFJJR0hUUyBSRVNFUlZFRC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqICAgKGMpIENPUFlSSUdIVCAyMDIwIElORk9SLiAgQUxMIFJJR0hUUyBSRVNFUlZFRC4gICAgICAgICAgICoNCiAqICAgVEhFIFdPUkQgQU5EIERFU0lHTiBNQVJLUyBTRVQgRk9SVEggSEVSRUlOIEFSRSAgICAgICAgICAgICoNCiAqICAgVFJBREVNQVJLUyBBTkQvT1IgUkVHSVNURVJFRCBUUkFERU1BUktTIE9GIElORk9SICAgICAgICAgICoNCiAqICAgQU5EL09SIElUUyBBRkZJTElBVEVTIEFORCBTVUJTSURJQVJJRVMuIEFMTCBSSUdIVFMgICAgICAgICoNCiAqICAgUkVTRVJWRUQuICBBTEwgT1RIRVIgVFJBREVNQVJLUyBMSVNURUQgSEVSRUlOIEFSRSAgICAgICAgICoNCiAqICAgVEhFIFBST1BFUlRZIE9GIFRIRUlSIFJFU1BFQ1RJVkUgT1dORVJTLiAgICAgICAgICAgICAgICAgICoNCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAqLw0KDQogaW1wb3J0IGdyb292eS5sYW5nLkNsb3N1cmUNCiANCiBpbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTsNCiBpbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7DQogaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXI7DQogaW1wb3J0IGphdmEudGltZS5ab25lSWQ7DQogaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOw0KIGltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDsNCiBpbXBvcnQgamF2YS5tYXRoLlJvdW5kaW5nTW9kZTsNCiBpbXBvcnQgamF2YS50ZXh0LkRlY2ltYWxGb3JtYXQ7DQoNCg0KLyoNCiAqTW9kaWZpY2F0aW9uIGFyZWEgLSBNMw0KICpOYnIgICAgICAgICAgICAgICAgRGF0ZSAgICAgIFVzZXIgaWQgICAgIERlc2NyaXB0aW9uDQogKk5IR19QaGFzZV8yICAgICAgICAyMDI0MDYxMiAgS1ZFUkNPICAgV29ya2Zsb3cgYWN0aW9uIEF1ZGl0IFRyYWlsDQogKk5IR19TdXBwbGllclBvcnRhbCAyMDI1MDMxNCAgS1ZFUkNPICAgQWRkIG5ldyBjb2x1bW4gQ1BQUiwgQ05BTSwgQ0xBTSwgU0lURSwgUkVTUCwgQ1JJRA0KICoNCiAqLw0KDQovKioNCiogLSBBZGQgQXVkaXQgVHJhaWwgZXh0ZW5zaW9uIHRhYmxlIHJvdw0KKi8NCnB1YmxpYyBjbGFzcyBBZGRBdWRpdCBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlOw0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyOw0KICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXI7DQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtOw0KICBwcml2YXRlIGZpbmFsIElvbkFQSSBpb247DQogIA0KICAvL0lucHV0IGZpZWxkcw0KICBwcml2YXRlIFN0cmluZyBkaXZpOw0KICBwcml2YXRlIFN0cmluZyB3Zm5tOw0KICBwcml2YXRlIFN0cmluZyBwdW5vOw0KICBwcml2YXRlIFN0cmluZyBwbmxpOw0KICBwcml2YXRlIFN0cmluZyBwbmxzOw0KICBwcml2YXRlIFN0cmluZyBzdW5vOw0KICBwcml2YXRlIFN0cmluZyBzaW5vOw0KICBwcml2YXRlIFN0cmluZyBpbnlyOw0KICBwcml2YXRlIFN0cmluZyByZXBuOw0KICBwcml2YXRlIFN0cmluZyBhcHByOw0KICBwcml2YXRlIFN0cmluZyBzdW5tOw0KICBwcml2YXRlIFN0cmluZyBwdXByOw0KICBwcml2YXRlIFN0cmluZyBsbmFtOw0KICBwcml2YXRlIFN0cmluZyBsYW10Ow0KICBwcml2YXRlIFN0cmluZyBjdWNkOw0KICBwcml2YXRlIFN0cmluZyBpdG5vOw0KICBwcml2YXRlIFN0cmluZyBhY3RhOw0KICBwcml2YXRlIFN0cmluZyBhcHJvOw0KICBwcml2YXRlIFN0cmluZyBhcGxpOw0KICBwcml2YXRlIFN0cmluZyBwdXJjOw0KICBwcml2YXRlIFN0cmluZyBhaXQxOw0KICBwcml2YXRlIFN0cmluZyBhaXQyOw0KICBwcml2YXRlIFN0cmluZyBhaXQzOw0KICBwcml2YXRlIFN0cmluZyBhaXQ0Ow0KICBwcml2YXRlIFN0cmluZyBhaXQ1Ow0KICBwcml2YXRlIFN0cmluZyBhaXQ2Ow0KICBwcml2YXRlIFN0cmluZyBhaXQ3Ow0KICBwcml2YXRlIFN0cmluZyBvcnFhOw0KICBwcml2YXRlIFN0cmluZyByb3JuOw0KICBwcml2YXRlIFN0cmluZyBwbHBuID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIHBscHMgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgcGxwMiA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBjcHByID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIHNpdGUgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgY2FtdCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBjbGFtID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIHJlc3AgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgY3JpZCA9ICIiOw0KDQogIA0KDQogIHByaXZhdGUgYm9vbGVhbiBmb3VuZDsNCiAgDQoNCiAgcHJpdmF0ZSBpbnQgWFhDT05POw0KIA0KIC8qDQogICogQWRkIFdvcmtmbG93IEFjdGlvbiBBdWRpdCBUcmFpbCBleHRlbnNpb24gdGFibGUgcm93DQogKi8NCiAgcHVibGljIEFkZEF1ZGl0KE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIExvZ2dlckFQSSBsb2dnZXIsIFByb2dyYW1BUEkgcHJvZ3JhbSwgSW9uQVBJIGlvbikgew0KICAgIHRoaXMubWkgPSBtaTsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogIAl0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXI7DQogIAl0aGlzLmxvZ2dlciA9IGxvZ2dlcjsNCiAgCXRoaXMucHJvZ3JhbSA9IHByb2dyYW07DQoJICB0aGlzLmlvbiA9IGlvbjsNCgkgIA0KICB9DQogIA0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIA0KICAJZGl2aSA9IG1pLmluRGF0YS5nZXQoIkRJVkkiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJESVZJIikudHJpbSgpOw0KICAgIGlmIChkaXZpLmlzRW1wdHkoKSkgew0KICAgICAgbWkuZXJyb3IoIkRpdmlzaW9uIG11c3QgYmUgZW50ZXJlZCIpOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCiAgCXdmbm0gPSBtaS5pbkRhdGEuZ2V0KCJXRk5NIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiV0ZOTSIpLnRyaW0oKTsNCiAgICBpZiAod2ZubS5pc0VtcHR5KCkpIHsNCiAgICAgIG1pLmVycm9yKCJXb3JrZmxvdyBuYW1lIG11c3QgYmUgZW50ZXJlZCIpOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCiAgCXB1bm8gPSBtaS5pbkRhdGEuZ2V0KCJQVU5PIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiUFVOTyIpLnRyaW0oKTsNCiAgCWlmIChwdW5vID09ICI/Iikgew0KICAJICBwdW5vID0gIiAiOw0KICAJfSANCiAgCXBubGkgPSBtaS5pbkRhdGEuZ2V0KCJQTkxJIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiUE5MSSIpLnRyaW0oKTsNCiAgCWlmIChwbmxpID09ICI/Iikgew0KICAJICBwbmxpID0gIiAiOw0KICAJfSANCiAgCXBubHMgPSBtaS5pbkRhdGEuZ2V0KCJQTkxTIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiUE5MUyIpLnRyaW0oKTsNCiAgCWlmIChwbmxzID09ICI/Iikgew0KICAJICBwbmxzID0gIiAiOw0KICAJfSANCiAgCXN1bm8gPSBtaS5pbkRhdGEuZ2V0KCJTVU5PIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiU1VOTyIpLnRyaW0oKTsNCiAgCWlmIChzdW5vID09ICI/Iikgew0KICAJICBzdW5vID0gIiI7DQogIAl9IA0KICAJc2lubyA9IG1pLmluRGF0YS5nZXQoIlNJTk8iKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJTSU5PIikudHJpbSgpOw0KICAJaWYgKHNpbm8gPT0gIj8iKSB7DQogIAkgIHNpbm8gPSAiIjsNCiAgCX0gDQogIAlpbnlyID0gbWkuaW5EYXRhLmdldCgiSU5ZUiIpID09IG51bGwgPyAnJyA6IG1pLmluRGF0YS5nZXQoIklOWVIiKS50cmltKCk7DQogIAlpZiAoaW55ciA9PSAiPyIpIHsNCiAgCSAgaW55ciA9ICIgIjsNCiAgCX0gDQogIAlyZXBuID0gbWkuaW5EYXRhLmdldCgiUkVQTiIpID09IG51bGwgPyAnMCcgOiBtaS5pbkRhdGEuZ2V0KCJSRVBOIikudHJpbSgpOw0KICAJaWYgKHJlcG4gPT0gIj8iKSB7DQogIAkgIHJlcG4gPSAiICI7DQogIAl9IA0KDQoJCVhYQ09OTyA9IChJbnRlZ2VyKXByb2dyYW0uTERBWkQuQ09OTzsNCg0KICAgIC8vIFZhbGlkYXRlIGlucHV0IGZpZWxkcyAgCQ0KICAgIA0KICAgIC8vIFZhbGlkYXRlIGlucHV0IGZpZWxkcyBmb3IgU3VwcGxpZXIgSW52b2ljZQ0KCQlpZiAod2ZubS5pc0VtcHR5KCkpIHsNCiAgICAgIG1pLmVycm9yKCJXb3JrZmxvdyBuYW1lIG11c3QgYmUgZW50ZXJlZCIpOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIC8vIHZhbGlkYXRlIGlucHV0IGZpZWxkcyBmb3IgU3VwcGxpZXIgSW52b2ljZSBhbmQgUHVyY2hhc2UgT3JkZXIgTGluZQ0KICAgIGlmICh3Zm5tLmVxdWFscygiU3VwcGxpZXJJbnZvaWNlTGluZV9BcHByb3ZhbF9Ob25fTWF0Y2hlZCIpIHx8IHdmbm0uZXF1YWxzKCJTdXBwbGllckludm9pY2VMaW5lX1BPUmVjZWlwdCIpIHx8IHdmbm0uZXF1YWxzKCJQT0xpbmVfQXV0aG9yaXNhdGlvbiIpKSB7DQoJCSAgIGlmIChwdW5vLmlzRW1wdHkoKSkgew0KICAgICAgICAgIG1pLmVycm9yKCJQTyBudW1iZXIgbXVzdCBiZSBlbnRlcmVkIik7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgIH0NCgkJICAgaWYgKHBubGkuaXNFbXB0eSgpKSB7DQogICAgICAgICAgbWkuZXJyb3IoIlBPIGxpbmUgbnVtYmVyIG11c3QgYmUgZW50ZXJlZCIpOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICB9DQoJCSAgIGlmIChwbmxzLmlzRW1wdHkoKSkgew0KICAgICAgICAgIG1pLmVycm9yKCJQTyBzdWIgbGluZSBubyBtdXN0IGJlIGVudGVyZWQiKTsNCiAgICAgICAgICByZXR1cm47DQoJCSAgIH0gICAgICANCiAgICB9DQogICAgaWYgKHdmbm0uZXF1YWxzKCJTdXBwbGllckludm9pY2VMaW5lX0FwcHJvdmFsX05vbl9NYXRjaGVkIikgfHwgd2ZubS5lcXVhbHMoIlN1cHBsaWVySW52b2ljZUxpbmVfUE9SZWNlaXB0IikgfHwgd2ZubS5lcXVhbHMoIkludm9pY2VfTm9fUE9fQXBwcm92YWwiKSkgew0KICAgICAgIGlmIChzdW5vLmlzRW1wdHkoKSkgew0KICAgICAgICAgIG1pLmVycm9yKCJTdXBwbGllciBubyBtdXN0IGJlIGVudGVyZWQiKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCgkJICAgIGlmIChzaW5vLmlzRW1wdHkoKSkgew0KICAgICAgICAgIG1pLmVycm9yKCJTdXBwbGllciBJbnZvaWNlIG5vIG11c3QgYmUgZW50ZXJlZCIpOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KCQkgICAgaWYgKGlueXIuaXNFbXB0eSgpKSB7DQogICAgICAgICAgbWkuZXJyb3IoIkludm9pY2UgeWVhciBtdXN0IGJlIGVudGVyZWQiKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyB2YWxpZGF0ZSBpbnB1dCBmaWVsc2QgZm9yIFB1cmNoYXNlIFJlcXVpc2l0aW9uDQogICAgaWYgKHdmbm0uZXF1YWxzKCJQT1JlcXVpc2l0b25fQXV0aG9yaXNhdGlvbiIpKSB7DQoJCSAgIGlmIChwdW5vLmlzRW1wdHkoKSkgew0KICAgICAgICAgIG1pLmVycm9yKCJQUiBubyBtdXN0IGJlIGVudGVyZWQiKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgfQ0KCQkgICBpZiAocG5saS5pc0VtcHR5KCkpIHsNCiAgICAgICAgICBtaS5lcnJvcigiUFIgc3ViIGxpbmUgbm8gbXVzdCBiZSBlbnRlcmVkIik7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgIH0NCgkJICAgaWYgKHBubHMuaXNFbXB0eSgpKSB7DQogICAgICAgICAgbWkuZXJyb3IoIlBSIHN1YiBsaW5lIG5vIDIgbXVzdCBiZSBlbnRlcmVkIik7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgIH0NCiAgICAgICBwbHBuID0gcHVubzsNCiAgICAgICBwbHBzID0gcG5saTsNCiAgICAgICBwbHAyID0gcG5sczsNCiAgICAgICBpbnlyID0gIjAiOw0KICAgICAgIHJlcG4gPSAiMCI7ICAgICAgIA0KICAgIH0NCiAgICANCiAgICAvLyBzZXQgaW55ciwgcmVwbiB0byAwIGZvciBQT0xpbmVfQXV0aG9yaXNhdGlvbg0KICAgIGlmICh3Zm5tLmVxdWFscygiUE9MaW5lX0F1dGhvcmlzYXRpb24iKSkgew0KICAgICAgIGlueXIgPSAiMCI7DQogICAgICAgcmVwbiA9ICIwIjsNCiAgICB9DQogICAgLy8gc2V0IHBubGksIHBubHMgdG8gMCBmb3IgSW52b2ljZSBObyBQTyBJbnZvaWNlX05vX1BPX0FwcHJvdmFsDQogICAgaWYgKHdmbm0uZXF1YWxzKCJJbnZvaWNlX05vX1BPX0FwcHJvdmFsIikpIHsNCiAgICAgICBwbmxpID0gIjAiOw0KICAgICAgIHBubHMgPSAiMCI7DQogICAgICAgcmVwbiA9ICIwIjsNCiAgICB9DQogICAgDQogICAgaWYgKHJlcG4uaXNFbXB0eSgpKSB7DQogICAgICByZXBuID0gIjAiOw0KICAgIH0NCiAgICANCiAgCWFwcHIgPSBtaS5pbkRhdGEuZ2V0KCJBUFBSIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiQVBQUiIpLnRyaW0oKTsNCiAgCWlmIChhcHByID09ICI/Iikgew0KICAJICBhcHByID0gIiI7DQogIAl9IA0KICAJYWN0YSA9IG1pLmluRGF0YS5nZXQoIkFDVEEiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJBQ1RBIikudHJpbSgpOw0KCQlpZiAoYWN0YS5pc0VtcHR5KCkpIHsNCiAgICAgIG1pLmVycm9yKCJXb3JrZmxvdyBBY3Rpb24gbXVzdCBiZSBlbnRlcmVkIik7DQogICAgICByZXR1cm47DQogICAgfQ0KICAJc3VubSA9IG1pLmluRGF0YS5nZXQoIlNVTk0iKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJTVU5NIikudHJpbSgpOw0KICAJaWYgKHN1bm0gPT0gIj8iKSB7DQogIAkgIHN1bm0gPSAiIjsNCiAgCX0NCiAgCWl0bm8gPSBtaS5pbkRhdGEuZ2V0KCJJVE5PIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiSVROTyIpLnRyaW0oKTsNCiAgCWlmIChpdG5vID09ICI/Iikgew0KICAJICBpdG5vID0gIiI7DQogIAl9DQogIAljdWNkID0gbWkuaW5EYXRhLmdldCgiQ1VDRCIpID09IG51bGwgPyAnJyA6IG1pLmluRGF0YS5nZXQoIkNVQ0QiKS50cmltKCk7DQogIAlpZiAoY3VjZCA9PSAiPyIpIHsNCiAgCSAgY3VjZCA9ICIiOw0KICAJfQ0KICAJcHVwciA9IG1pLmluRGF0YS5nZXQoIlBVUFIiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJQVVBSIikudHJpbSgpOw0KICAJaWYgKHB1cHIgPT0gIj8iKSB7DQogIAkgIHB1cHIgPSAiMCI7DQogIAl9DQogIAlsbmFtID0gbWkuaW5EYXRhLmdldCgiTE5BTSIpID09IG51bGwgPyAnJyA6IG1pLmluRGF0YS5nZXQoIkxOQU0iKS50cmltKCk7DQogIAlpZiAobG5hbSA9PSAiPyIpIHsNCiAgCSAgbG5hbSA9ICIwIjsNCiAgCX0NCiAgCWxhbXQgPSBtaS5pbkRhdGEuZ2V0KCJMQU1UIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiTEFNVCIpLnRyaW0oKTsNCiAgCWlmIChsYW10ID09ICI/Iikgew0KICAJICBsYW10ID0gIjAiOw0KICAJfQ0KICAJYXBybyA9IG1pLmluRGF0YS5nZXQoIkFQUk8iKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJBUFJPIikudHJpbSgpOw0KICAJaWYgKGFwcm8gPT0gIj8iKSB7DQogIAkgIGFwcm8gPSAiIjsNCiAgCX0NCiAgCWFwbGkgPSBtaS5pbkRhdGEuZ2V0KCJBUExJIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiQVBMSSIpLnRyaW0oKTsNCiAgCWlmIChhcGxpID09ICI/Iikgew0KICAJICBhcGxpID0gIjAiOw0KICAJfQ0KICAJcHVyYyA9IG1pLmluRGF0YS5nZXQoIlBVUkMiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJQVVJDIikudHJpbSgpOw0KICAJaWYgKHB1cmMgPT0gIj8iKSB7DQogIAkgIHB1cmMgPSAiIjsNCiAgCX0NCiAgCWFpdDEgPSBtaS5pbkRhdGEuZ2V0KCJBSVQxIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiQUlUMSIpLnRyaW0oKTsNCiAgCWlmIChhaXQxID09ICI/IiB8fCBhaXQxLmVxdWFscygiTi9BIikpIHsNCiAgCSAgYWl0MSA9ICIiOw0KICAJfQ0KICAJYWl0MiA9IG1pLmluRGF0YS5nZXQoIkFJVDIiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJBSVQyIikudHJpbSgpOw0KICAJaWYgKGFpdDIgPT0gIj8iICB8fCBhaXQyLmVxdWFscygiTi9BIikpIHsNCiAgCSAgYWl0MiA9ICIiOw0KICAJfQ0KICAJYWl0MyA9IG1pLmluRGF0YS5nZXQoIkFJVDMiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJBSVQzIikudHJpbSgpOw0KICAJaWYgKGFpdDMgPT0gIj8iIHx8IGFpdDMuZXF1YWxzKCJOL0EiKSkgew0KICAJICBhaXQzID0gIiI7DQogIAl9DQogIAlhaXQ0ID0gbWkuaW5EYXRhLmdldCgiQUlUNCIpID09IG51bGwgPyAnJyA6IG1pLmluRGF0YS5nZXQoIkFJVDQiKS50cmltKCk7DQogIAlpZiAoYWl0NCA9PSAiPyIgfHwgYWl0NC5lcXVhbHMoIk4vQSIpKSB7DQogIAkgIGFpdDQgPSAiIjsNCiAgCX0NCiAgCWFpdDUgPSBtaS5pbkRhdGEuZ2V0KCJBSVQ1IikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiQUlUNSIpLnRyaW0oKTsNCiAgCWlmIChhaXQ1ID09ICI/IiB8fCBhaXQ1LmVxdWFscygiTi9BIikpIHsNCiAgCSAgYWl0NSA9ICIiOw0KICAJfQ0KICAJYWl0NiA9IG1pLmluRGF0YS5nZXQoIkFJVDYiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJBSVQ2IikudHJpbSgpOw0KICAJaWYgKGFpdDYgPT0gIj8iIHx8IGFpdDYuZXF1YWxzKCJOL0EiKSkgew0KICAJICBhaXQ2ID0gIiI7DQogIAl9DQogIAlhaXQ3ID0gbWkuaW5EYXRhLmdldCgiQUlUNyIpID09IG51bGwgPyAnJyA6IG1pLmluRGF0YS5nZXQoIkFJVDciKS50cmltKCk7DQogIAlpZiAoYWl0NyA9PSAiPyIgfHwgYWl0Ny5lcXVhbHMoIk4vQSIpKSB7DQogIAkgIGFpdDcgPSAiIjsNCiAgCX0NCiAgCW9ycWEgPSBtaS5pbkRhdGEuZ2V0KCJPUlFBIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiT1JRQSIpLnRyaW0oKTsNCiAgCWlmIChvcnFhID09ICI/Iikgew0KICAJICBvcnFhID0gIjAiOw0KICAJfQ0KICAJcm9ybiA9IG1pLmluRGF0YS5nZXQoIlJPUk4iKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJST1JOIikudHJpbSgpOw0KICAJaWYgKHJvcm4gPT0gIj8iIHx8IHJvcm4uZXF1YWxzKCJOL0EiKSkgew0KICAJICByb3JuID0gIiI7DQogIAl9DQogIAljcHByID0gbWkuaW5EYXRhLmdldCgiQ1BQUiIpID09IG51bGwgPyAnMCcgOiBtaS5pbkRhdGEuZ2V0KCJDUFBSIikudHJpbSgpOw0KICAJaWYgKGNwcHIgPT0gIj8iKSB7DQogIAkgIGNwcHIgPSAiMCI7DQogIAl9DQogIAljYW10ID0gbWkuaW5EYXRhLmdldCgiQ0FNVCIpID09IG51bGwgPyAnMCcgOiBtaS5pbkRhdGEuZ2V0KCJDQU1UIikudHJpbSgpOw0KICAJaWYgKGNhbXQgPT0gIj8iKSB7DQogIAkgIGNhbXQgPSAiMCI7DQogIAl9DQogIAlzaXRlID0gbWkuaW5EYXRhLmdldCgiU0lURSIpID09IG51bGwgPyAnJyA6IG1pLmluRGF0YS5nZXQoIlNJVEUiKS50cmltKCk7DQogIAlpZiAoc2l0ZSA9PSAiPyIgfHwgc2l0ZS5lcXVhbHMoIk4vQSIpKSB7DQogIAkgIHNpdGUgPSAiIjsNCiAgCX0NCiAgCXJlc3AgPSBtaS5pbkRhdGEuZ2V0KCJSRVNQIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiUkVTUCIpLnRyaW0oKTsNCiAgCWlmIChyZXNwID09ICI/Iikgew0KICAJICByZXNwID0gIiI7DQogIAl9DQogIAljcmlkID0gbWkuaW5EYXRhLmdldCgiQ1JJRCIpID09IG51bGwgPyAnJyA6IG1pLmluRGF0YS5nZXQoIkNSSUQiKS50cmltKCk7DQogIAlpZiAoY3JpZCA9PSAiPyIpIHsNCiAgCSAgY3JpZCA9ICIiOw0KICAJfQ0KDQoNCgkJWFhDT05PID0gKEludGVnZXIpcHJvZ3JhbS5MREFaRC5DT05POw0KDQogICAgLyogdmFsaWRhdGUgd2ZubSAqLw0KICAgIGlmICghd2ZubS5lcXVhbHMoIlBPTGluZV9BdXRob3Jpc2F0aW9uIikgJiYgIXdmbm0uZXF1YWxzKCJQT1JlcXVpc2l0b25fQXV0aG9yaXNhdGlvbiIpICYmICF3Zm5tLmVxdWFscygiU3VwcGxpZXJJbnZvaWNlTGluZV9BcHByb3ZhbF9Ob25fTWF0Y2hlZCIpICYmICF3Zm5tLmVxdWFscygiU3VwcGxpZXJJbnZvaWNlTGluZV9QT1JlY2VpcHQiKSAmJiAhd2ZubS5lcXVhbHMoIkludm9pY2VfTm9fUE9fQXBwcm92YWwiKSkgew0KICAgICAgbWkuZXJyb3IoIkludmFsaWQgd29ya2Zsb3cgbmFtZSIpOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIC8vIC0gdmFsaWRhdGUgYXBwcm92ZXINCiAgICBpZiAoIWFwcHIuaXNFbXB0eSgpKSB7DQogICAgICBEQkFjdGlvbiBxdWVyeUNNTlVTUiA9IGRhdGFiYXNlLnRhYmxlKCJDTU5VU1IiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkpVVVNJRCIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBDTU5VU1IgPSBxdWVyeUNNTlVTUi5nZXRDb250YWluZXIoKTsNCiAgICAgIENNTlVTUi5zZXQoIkpVQ09OTyIsIDApOw0KICAgICAgQ01OVVNSLnNldCgiSlVESVZJIiwgIiIpOw0KICAgICAgQ01OVVNSLnNldCgiSlVVU0lEIiwgYXBwcik7DQogICAgICBpZiAoIXF1ZXJ5Q01OVVNSLnJlYWQoQ01OVVNSKSkgew0KICAgICAgICBtaS5lcnJvcigiQXBwcm92ZXIgaXMgaW52YWxpZC4iKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIC0gdmFsaWRhdGUgZGl2aXNpb24NCiAgICBpZiAoIWRpdmkuaXNFbXB0eSgpKSB7DQogICAgICBEQkFjdGlvbiBxdWVyeUNNTkRJViA9IGRhdGFiYXNlLnRhYmxlKCJDTU5ESVYiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkNDRElWSSIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBDTU5ESVYgPSBxdWVyeUNNTkRJVi5nZXRDb250YWluZXIoKTsNCiAgICAgIENNTkRJVi5zZXQoIkNDQ09OTyIsIFhYQ09OTyk7DQogICAgICBDTU5ESVYuc2V0KCJDQ0RJVkkiLCBkaXZpKTsNCiAgICAgIGlmICghcXVlcnlDTU5ESVYucmVhZChDTU5ESVYpKSB7DQogICAgICAgIG1pLmVycm9yKCJEaXZpc2lvbiBpcyBpbnZhbGlkLiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfQ0KDQogICAgLy8gLSB2YWxpZGF0ZSBzdXBwbGllcg0KICAgIGlmICghc3Vuby5pc0VtcHR5KCkpIHsNCiAgICAgIERCQWN0aW9uIHF1ZXJ5Q0lETUFTID0gZGF0YWJhc2UudGFibGUoIkNJRE1BUyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSURTVU5PIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIENJRE1BUyA9IHF1ZXJ5Q0lETUFTLmdldENvbnRhaW5lcigpOw0KICAgICAgQ0lETUFTLnNldCgiSURDT05PIiwgWFhDT05PKTsNCiAgICAgIENJRE1BUy5zZXQoIklEU1VOTyIsIHN1bm8pOw0KICAgICAgaWYgKCFxdWVyeUNJRE1BUy5yZWFkKENJRE1BUykpIHsNCiAgICAgICAgbWkuZXJyb3IoIlN1cHBsaWVyIGlzIGludmFsaWQuIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvLyAtIHZhbGlkYXRlIGl0ZW0gbm8NCiAgICBpZiAoIWl0bm8uaXNFbXB0eSgpKSB7DQogICAgICBEQkFjdGlvbiBxdWVyeU1JVE1BUyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NSVROTyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBNSVRNQVMgPSBxdWVyeU1JVE1BUy5nZXRDb250YWluZXIoKTsNCiAgICAgIE1JVE1BUy5zZXQoIk1NQ09OTyIsIFhYQ09OTyk7DQogICAgICBNSVRNQVMuc2V0KCJNTUlUTk8iLCBpdG5vKTsNCiAgICAgIGlmICghcXVlcnlNSVRNQVMucmVhZChNSVRNQVMpKSB7DQogICAgICAgIG1pLmVycm9yKCJJdGVtIG5vIGlzIGludmFsaWQuIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvLyAtIHZhbGlkYXRlIGN1cnJlbmN5DQogICAgaWYgKCFjdWNkLmlzRW1wdHkoKSkgew0KICAgICAgREJBY3Rpb24gcXVlcnlDU1lUQUIgPSBkYXRhYmFzZS50YWJsZSgiQ1NZVEFCIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJDVFNUS1kiKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgQ1NZVEFCID0gcXVlcnlDU1lUQUIuZ2V0Q29udGFpbmVyKCk7DQogICAgICBDU1lUQUIuc2V0KCJDVENPTk8iLCBYWENPTk8pOw0KICAgICAgQ1NZVEFCLnNldCgiQ1RESVZJIiwgIiIpOw0KICAgICAgQ1NZVEFCLnNldCgiQ1RTVENPIiwgIkNVQ0QiKTsNCiAgICAgIENTWVRBQi5zZXQoIkNUU1RLWSIsIGN1Y2QpOw0KICAgICAgQ1NZVEFCLnNldCgiQ1RMTkNEIiwgIiIpOw0KICAgICAgaWYgKCFxdWVyeUNTWVRBQi5yZWFkKENTWVRBQikpIHsNCiAgICAgICAgbWkuZXJyb3IoIkN1cnJlbmN5IGlzIGludmFsaWQuIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvLyAtIHZhbGlkYXRlIEFJVDEgQWNjb3VudA0KICAgIGlmICghYWl0MS5pc0VtcHR5KCkpIHsNCiAgICAgIERCQWN0aW9uIHF1ZXJ5RkNIQUNDID0gZGF0YWJhc2UudGFibGUoIkZDSEFDQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRUFBSVRNIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIEZDSEFDQyA9IHF1ZXJ5RkNIQUNDLmdldENvbnRhaW5lcigpOw0KICAgICAgRkNIQUNDLnNldCgiRUFDT05PIiwgWFhDT05PKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBRElWSSIsICIiKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBQUlUUCIsIDEpOw0KICAgICAgRkNIQUNDLnNldCgiRUFBSVRNIiwgYWl0MSk7DQogICAgICBpZiAoIXF1ZXJ5RkNIQUNDLnJlYWQoRkNIQUNDKSkgew0KICAgICAgICBGQ0hBQ0Muc2V0KCJFQURJVkkiLCBkaXZpKTsNCiAgICAgICAgaWYgKCFxdWVyeUZDSEFDQy5yZWFkKEZDSEFDQykpIHsNCiAgICAgICAgICBtaS5lcnJvcigiQWNjb3VudCBpcyBpbnZhbGlkLiIpOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLyAtIHZhbGlkYXRlIEFJVDIgQWNjb3VudA0KICAgIGlmICghYWl0Mi5pc0VtcHR5KCkpIHsNCiAgICAgIERCQWN0aW9uIHF1ZXJ5RkNIQUNDID0gZGF0YWJhc2UudGFibGUoIkZDSEFDQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRUFBSVRNIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIEZDSEFDQyA9IHF1ZXJ5RkNIQUNDLmdldENvbnRhaW5lcigpOw0KICAgICAgRkNIQUNDLnNldCgiRUFDT05PIiwgWFhDT05PKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBRElWSSIsICIiKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBQUlUUCIsIDIpOw0KICAgICAgRkNIQUNDLnNldCgiRUFBSVRNIiwgYWl0Mik7DQogICAgICBpZiAoIXF1ZXJ5RkNIQUNDLnJlYWQoRkNIQUNDKSkgew0KICAgICAgICBGQ0hBQ0Muc2V0KCJFQURJVkkiLCBkaXZpKTsNCiAgICAgICAgaWYgKCFxdWVyeUZDSEFDQy5yZWFkKEZDSEFDQykpIHsNCiAgICAgICAgICBtaS5lcnJvcigiQ29zdCBjZW50cmUgaXMgaW52YWxpZC4iKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICAvLyAtIHZhbGlkYXRlIEFJVDMgQWNjb3VudA0KICAgIGlmICghYWl0My5pc0VtcHR5KCkpIHsNCiAgICAgIERCQWN0aW9uIHF1ZXJ5RkNIQUNDID0gZGF0YWJhc2UudGFibGUoIkZDSEFDQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRUFBSVRNIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIEZDSEFDQyA9IHF1ZXJ5RkNIQUNDLmdldENvbnRhaW5lcigpOw0KICAgICAgRkNIQUNDLnNldCgiRUFDT05PIiwgWFhDT05PKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBRElWSSIsICIiKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBQUlUUCIsIDMpOw0KICAgICAgRkNIQUNDLnNldCgiRUFBSVRNIiwgYWl0Myk7DQogICAgICBpZiAoIXF1ZXJ5RkNIQUNDLnJlYWQoRkNIQUNDKSkgew0KICAgICAgICBGQ0hBQ0Muc2V0KCJFQURJVkkiLCBkaXZpKTsNCiAgICAgICAgaWYgKCFxdWVyeUZDSEFDQy5yZWFkKEZDSEFDQykpIHsNCiAgICAgICAgICBtaS5lcnJvcigiVW5pdCBpcyBpbnZhbGlkLiIpOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIC0gdmFsaWRhdGUgQUlUNCBBY2NvdW50DQogICAgaWYgKCFhaXQ0LmlzRW1wdHkoKSkgew0KICAgICAgREJBY3Rpb24gcXVlcnlGQ0hBQ0MgPSBkYXRhYmFzZS50YWJsZSgiRkNIQUNDIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJFQUFJVE0iKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgRkNIQUNDID0gcXVlcnlGQ0hBQ0MuZ2V0Q29udGFpbmVyKCk7DQogICAgICBGQ0hBQ0Muc2V0KCJFQUNPTk8iLCBYWENPTk8pOw0KICAgICAgRkNIQUNDLnNldCgiRUFESVZJIiwgIiIpOw0KICAgICAgRkNIQUNDLnNldCgiRUFBSVRQIiwgNCk7DQogICAgICBGQ0hBQ0Muc2V0KCJFQUFJVE0iLCBhaXQ0KTsNCiAgICAgIGlmICghcXVlcnlGQ0hBQ0MucmVhZChGQ0hBQ0MpKSB7DQogICAgICAgIEZDSEFDQy5zZXQoIkVBRElWSSIsIGRpdmkpOw0KICAgICAgICBpZiAoIXF1ZXJ5RkNIQUNDLnJlYWQoRkNIQUNDKSkgew0KICAgICAgICAgIG1pLmVycm9yKCJDb21wb25lbnQgaXMgaW52YWxpZC4iKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICAvLyAtIHZhbGlkYXRlIEFJVDUgQWNjb3VudA0KICAgIGlmICghYWl0NS5pc0VtcHR5KCkpIHsNCiAgICAgIERCQWN0aW9uIHF1ZXJ5RkNIQUNDID0gZGF0YWJhc2UudGFibGUoIkZDSEFDQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRUFBSVRNIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIEZDSEFDQyA9IHF1ZXJ5RkNIQUNDLmdldENvbnRhaW5lcigpOw0KICAgICAgRkNIQUNDLnNldCgiRUFDT05PIiwgWFhDT05PKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBRElWSSIsICIiKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBQUlUUCIsIDUpOw0KICAgICAgRkNIQUNDLnNldCgiRUFBSVRNIiwgYWl0NSk7DQogICAgICBpZiAoIXF1ZXJ5RkNIQUNDLnJlYWQoRkNIQUNDKSkgew0KICAgICAgICBGQ0hBQ0Muc2V0KCJFQURJVkkiLCBkaXZpKTsNCiAgICAgICAgaWYgKCFxdWVyeUZDSEFDQy5yZWFkKEZDSEFDQykpIHsNCiAgICAgICAgICBtaS5lcnJvcigiU3ViIEFjY291bnQgaXMgaW52YWxpZC4iKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICAvLyAtIHZhbGlkYXRlIEFJVDYgQWNjb3VudA0KICAgIGlmICghYWl0Ni5pc0VtcHR5KCkpIHsNCiAgICAgIERCQWN0aW9uIHF1ZXJ5RkNIQUNDID0gZGF0YWJhc2UudGFibGUoIkZDSEFDQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRUFBSVRNIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIEZDSEFDQyA9IHF1ZXJ5RkNIQUNDLmdldENvbnRhaW5lcigpOw0KICAgICAgRkNIQUNDLnNldCgiRUFDT05PIiwgWFhDT05PKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBRElWSSIsICIiKTsNCiAgICAgIEZDSEFDQy5zZXQoIkVBQUlUUCIsIDYpOw0KICAgICAgRkNIQUNDLnNldCgiRUFBSVRNIiwgYWl0Nik7DQogICAgICBpZiAoIXF1ZXJ5RkNIQUNDLnJlYWQoRkNIQUNDKSkgew0KICAgICAgICBGQ0hBQ0Muc2V0KCJFQURJVkkiLCBkaXZpKTsNCiAgICAgICAgaWYgKCFxdWVyeUZDSEFDQy5yZWFkKEZDSEFDQykpIHsNCiAgICAgICAgICBtaS5lcnJvcigiUHJvamVjdCBpcyBpbnZhbGlkLiIpOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIC0gdmFsaWRhdGUgQUlUNyBBY2NvdW50DQogICAgaWYgKCFhaXQ3LmlzRW1wdHkoKSkgew0KICAgICAgREJBY3Rpb24gcXVlcnlGQ0hBQ0MgPSBkYXRhYmFzZS50YWJsZSgiRkNIQUNDIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJFQUFJVE0iKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgRkNIQUNDID0gcXVlcnlGQ0hBQ0MuZ2V0Q29udGFpbmVyKCk7DQogICAgICBGQ0hBQ0Muc2V0KCJFQUNPTk8iLCBYWENPTk8pOw0KICAgICAgRkNIQUNDLnNldCgiRUFESVZJIiwgIiIpOw0KICAgICAgRkNIQUNDLnNldCgiRUFBSVRQIiwgNyk7DQogICAgICBGQ0hBQ0Muc2V0KCJFQUFJVE0iLCBhaXQ3KTsNCiAgICAgIGlmICghcXVlcnlGQ0hBQ0MucmVhZChGQ0hBQ0MpKSB7DQogICAgICAgIEZDSEFDQy5zZXQoIkVBRElWSSIsIGRpdmkpOw0KICAgICAgICBpZiAoIXF1ZXJ5RkNIQUNDLnJlYWQoRkNIQUNDKSkgew0KICAgICAgICAgIG1pLmVycm9yKCJFbGVtZW50IGlzIGludmFsaWQuIik7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgLy8gLSB2YWxpZGF0ZSByZXF1aXNpdGlvbmVyDQogICAgaWYgKCFwdXJjLmlzRW1wdHkoKSkgew0KICAgICAgREJBY3Rpb24gcXVlcnlDTU5VU1IgPSBkYXRhYmFzZS50YWJsZSgiQ01OVVNSIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJKVVVTSUQiKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgQ01OVVNSID0gcXVlcnlDTU5VU1IuZ2V0Q29udGFpbmVyKCk7DQogICAgICBDTU5VU1Iuc2V0KCJKVUNPTk8iLCAwKTsNCiAgICAgIENNTlVTUi5zZXQoIkpVRElWSSIsICIiKTsNCiAgICAgIENNTlVTUi5zZXQoIkpVVVNJRCIsIHB1cmMpOw0KICAgICAgaWYgKCFxdWVyeUNNTlVTUi5yZWFkKENNTlVTUikpIHsNCiAgICAgICAgbWkuZXJyb3IoIlJlcXVpc2l0aW9uZXIgaXMgaW52YWxpZC4iKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLyAtIHZhbGlkYXRlIHBsYW5uZWQgUE8gDQogICAgaWYgKCFwbHBuLmlzRW1wdHkoKSkgew0KICAgICAgREJBY3Rpb24gcXVlcnlNUE9QTFAgPSBkYXRhYmFzZS50YWJsZSgiTVBPUExQIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJQT0NPTk8iLCAiUE9QTFBOIiwgIlBPUExQUyIsICJQT1BMUDIiKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgTVBPUExQID0gcXVlcnlNUE9QTFAuZ2V0Q29udGFpbmVyKCk7DQogICAgICBNUE9QTFAuc2V0KCJQT0NPTk8iLCBYWENPTk8pOw0KICAgICAgTVBPUExQLnNldCgiUE9QTFBOIiwgcGxwbi50b0ludGVnZXIoKSk7DQogICAgICBNUE9QTFAuc2V0KCJQT1BMUFMiLCBwbHBzLnRvSW50ZWdlcigpKTsNCiAgICAgIE1QT1BMUC5zZXQoIlBPUExQMiIsIHBscDIudG9JbnRlZ2VyKCkpOw0KICAgICAgaWYgKCFxdWVyeU1QT1BMUC5yZWFkKE1QT1BMUCkpIHsNCiAgICAgICAgbWkuZXJyb3IoIlByb3Bvc2FsIG51bWJlciBpbnZhbGlkIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0gICAgDQogICAgfQ0KDQogICAgLy8gLSB2YWxpZGF0ZSBwdW5vDQogICAgaWYgKCFwdW5vLmlzRW1wdHkoKSAmJiAhd2ZubS5lcXVhbHMoIlBPUmVxdWlzaXRvbl9BdXRob3Jpc2F0aW9uIikpIHsNCiAgICAgICBEQkFjdGlvbiBxdWVyeU1QTElORSA9IGRhdGFiYXNlLnRhYmxlKCJNUExJTkUiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklCUFVOTyIsICJJQlBOTEkiLCAiSUJQTkxTIiwgIklCUExQTiIsICJJQlBMUFMiKS5idWlsZCgpOw0KICAgICAgIERCQ29udGFpbmVyIE1QTElORSA9IHF1ZXJ5TVBMSU5FLmdldENvbnRhaW5lcigpOw0KICAgICAgIE1QTElORS5zZXQoIklCQ09OTyIsIFhYQ09OTyk7DQogICAgICAgTVBMSU5FLnNldCgiSUJQVU5PIiwgcHVubyk7DQogICAgICAgTVBMSU5FLnNldCgiSUJQTkxJIiwgcG5saS50b0ludGVnZXIoKSk7DQogICAgICAgTVBMSU5FLnNldCgiSUJQTkxTIiwgcG5scy50b0ludGVnZXIoKSk7DQogICAgICAgaWYgKCFxdWVyeU1QTElORS5yZWFkKE1QTElORSkpIHsgICAgDQogICAgICAgIG1pLmVycm9yKCJQTyBsaW5lIGlzIGludmFsaWQuIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHBscG4gPSBNUExJTkUuZ2V0KCJJQlBMUE4iKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgICAgcGxwcyA9IE1QTElORS5nZXQoIklCUExQUyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICBwbHAyID0gIjAiOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICANCiAgICAvLyAtIHZhbGlkYXRlIHJlc3BvbnNpYmxlDQogICAgaWYgKCFyZXNwLmlzRW1wdHkoKSkgew0KICAgICAgREJBY3Rpb24gcXVlcnlDTU5VU1IgPSBkYXRhYmFzZS50YWJsZSgiQ01OVVNSIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJKVVVTSUQiKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgQ01OVVNSID0gcXVlcnlDTU5VU1IuZ2V0Q29udGFpbmVyKCk7DQogICAgICBDTU5VU1Iuc2V0KCJKVUNPTk8iLCAwKTsNCiAgICAgIENNTlVTUi5zZXQoIkpVRElWSSIsICIiKTsNCiAgICAgIENNTlVTUi5zZXQoIkpVVVNJRCIsIHJlc3ApOw0KICAgICAgaWYgKCFxdWVyeUNNTlVTUi5yZWFkKENNTlVTUikpIHsNCiAgICAgICAgbWkuZXJyb3IoIlVzZXIgUmVzcG9uc2libGUgaXMgaW52YWxpZC4iKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgCQ0KDQogICAgLy8gLSB2YWxpZGF0ZSBjcmVhdGVkIGJ5DQogICAgaWYgKCFjcmlkLmlzRW1wdHkoKSkgew0KICAgICAgREJBY3Rpb24gcXVlcnlDTU5VU1IgPSBkYXRhYmFzZS50YWJsZSgiQ01OVVNSIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJKVVVTSUQiKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgQ01OVVNSID0gcXVlcnlDTU5VU1IuZ2V0Q29udGFpbmVyKCk7DQogICAgICBDTU5VU1Iuc2V0KCJKVUNPTk8iLCAwKTsNCiAgICAgIENNTlVTUi5zZXQoIkpVRElWSSIsICIiKTsNCiAgICAgIENNTlVTUi5zZXQoIkpVVVNJRCIsIGNyaWQpOw0KICAgICAgaWYgKCFxdWVyeUNNTlVTUi5yZWFkKENNTlVTUikpIHsNCiAgICAgICAgbWkuZXJyb3IoIkNyZWF0ZWQgYnkgaXMgaW52YWxpZC4iKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0gIAkNCiAgICB3cml0ZUVYVFdBVCgpOw0KICB9DQogIC8qKg0KICAqIHdyaXRlRVhUV0FUIC0gV3JpdGUgUHVyY2hhc2UgQXV0aG9yaXNhdGlvbiBleHRlbnNpb24gdGFibGUgRVhUQVBSDQogICoNCiAgKi8NCiAgcHJpdmF0ZSB2b2lkIHdyaXRlRVhUV0FUKCkgew0KICAJWm9uZUlkIHppZCA9IFpvbmVJZC5vZigiQXVzdHJhbGlhL0JyaXNiYW5lIik7IA0KICAgIExvY2FsRGF0ZVRpbWUgY3VycmVudERhdGVUaW1lTm93ID0gTG9jYWxEYXRlVGltZS5ub3coemlkKTsNCiAgICBpbnQgY3VycmVudERhdGUgPSBjdXJyZW50RGF0ZVRpbWVOb3cuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCk7DQogICAgaW50IGN1cnJlbnRUaW1lID0gSW50ZWdlci52YWx1ZU9mKGN1cnJlbnREYXRlVGltZU5vdy5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkpOw0KICAgIFN0cmluZyB0aW1lc3RhbXAgPSBjdXJyZW50RGF0ZVRpbWVOb3cuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGRISG1tc3NTU1MiKSk7DQoNCgkgIERCQWN0aW9uIGFjdGlvbkVYVFdBVCA9IGRhdGFiYXNlLnRhYmxlKCJFWFRXQVQiKS5idWlsZCgpOw0KICAJREJDb250YWluZXIgRVhUV0FUID0gYWN0aW9uRVhUV0FULmdldENvbnRhaW5lcigpOw0KICAJRVhUV0FULnNldCgiRVhDT05PIiwgWFhDT05PKTsNCiAgCUVYVFdBVC5zZXQoIkVYRElWSSIsIGRpdmkpOw0KICAJRVhUV0FULnNldCgiRVhXRk5NIiwgd2ZubSk7DQogIAlpZiAoIXB1bm8uaXNFbXB0eSgpKSB7DQogIAkgIEVYVFdBVC5zZXQoIkVYUFVOTyIsIHB1bm8pOw0KICAJfQ0KICAJaWYgKCFwbmxpLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWFBOTEkiLCBwbmxpLnRvSW50ZWdlcigpKTsNCiAgCX0NCiAgCWlmICghcG5scy5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhQTkxTIiwgcG5scy50b0ludGVnZXIoKSk7DQogIAl9DQogIAlpZiAoIXN1bm8uaXNFbXB0eSgpKSB7DQogIAkgIEVYVFdBVC5zZXQoIkVYU1VOTyIsIHN1bm8pOw0KICAJfQ0KICAJaWYgKCFzaW5vLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWFNJTk8iLCBzaW5vKTsNCiAgCX0NCiAgCWlmICghaW55ci5pc0VtcHR5KCkpIHsNCiAgICAJRVhUV0FULnNldCgiRVhJTllSIiwgaW55ci50b0ludGVnZXIoKSk7DQogIAl9DQogIAlpZiAoIXJlcG4uaXNFbXB0eSgpKSB7DQogICAgCUVYVFdBVC5zZXQoIkVYUkVQTiIsIHJlcG4udG9JbnRlZ2VyKCkpOw0KICAJfQ0KICAJaWYgKCFhcHByLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWEFQUFIiLCBhcHByKTsNCiAgCX0NCiAgCUVYVFdBVC5zZXQoIkVYQUNUQSIsIGFjdGEpOw0KICAJRVhUV0FULnNldCgiRVhMTVRTIiwgdGltZXN0YW1wKTsNCiAgCUVYVFdBVC5zZXQoIkVYUkdEVCIsIGN1cnJlbnREYXRlKTsNCiAgCUVYVFdBVC5zZXQoIkVYUkdUTSIsIGN1cnJlbnRUaW1lKTsNCiAgCUVYVFdBVC5zZXQoIkVYTE1EVCIsIGN1cnJlbnREYXRlKTsNCiAgCUVYVFdBVC5zZXQoIkVYQ0hOTyIsIDApOw0KICAJRVhUV0FULnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpOw0KICAJaWYgKCFzdW5tLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWFNVTk0iLCBzdW5tKTsNCiAgCX0NCiAgCWlmICghaXRuby5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhJVE5PIiwgaXRubyk7DQogIAl9DQogIAlpZiAoIWN1Y2QuaXNFbXB0eSgpKSB7DQogIAkgIEVYVFdBVC5zZXQoIkVYQ1VDRCIsIGN1Y2QpOw0KICAJfQ0KICAJaWYgKCFwdXByLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWFBVUFIiLCBEb3VibGUucGFyc2VEb3VibGUocHVwcikpOw0KICAJfQ0KICAJaWYgKCFsbmFtLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWExOQU0iLCBEb3VibGUucGFyc2VEb3VibGUobG5hbSkpOw0KICAJfQ0KICAJaWYgKCFsYW10LmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWExBTVQiLCBEb3VibGUucGFyc2VEb3VibGUobGFtdCkpOw0KICAJfQ0KICAJaWYgKCFhcHJvLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWEFQUk8iLCBhcHJvKTsNCiAgCX0NCiAgCWlmICghYXBsaS5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhBUExJIiwgRG91YmxlLnBhcnNlRG91YmxlKGFwbGkpKTsNCiAgCX0NCiAgCWlmICghcHVyYy5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhQVVJDIiwgcHVyYyk7DQogIAl9DQogIAlpZiAoIWFpdDEuaXNFbXB0eSgpKSB7DQogIAkgIEVYVFdBVC5zZXQoIkVYQUlUMSIsIGFpdDEpOw0KICAJfQ0KICAJaWYgKCFhaXQyLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWEFJVDIiLCBhaXQyKTsNCiAgCX0NCiAgCWlmICghYWl0My5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhBSVQzIiwgYWl0Myk7DQogIAl9DQogIAlpZiAoIWFpdDQuaXNFbXB0eSgpKSB7DQogIAkgIEVYVFdBVC5zZXQoIkVYQUlUNCIsIGFpdDQpOw0KICAJfQ0KICAJaWYgKCFhaXQ1LmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWEFJVDUiLCBhaXQ1KTsNCiAgCX0NCiAgCWlmICghYWl0Ni5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhBSVQ2IiwgYWl0Nik7DQogIAl9DQogIAlpZiAoIWFpdDcuaXNFbXB0eSgpKSB7DQogIAkgIEVYVFdBVC5zZXQoIkVYQUlUNyIsIGFpdDcpOw0KICAJfQ0KICAJaWYgKCFvcnFhLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWE9SUUEiLCBEb3VibGUucGFyc2VEb3VibGUob3JxYSkpOw0KICAJfSAgCQ0KICAJaWYgKCFyb3JuLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWFJPUk4iLCByb3JuKTsNCiAgCX0NCiAgCWlmICghcGxwbi5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhQTFBOIiwgcGxwbi50b0ludGVnZXIoKSk7DQogIAl9DQogIAlpZiAoIXBscHMuaXNFbXB0eSgpKSB7DQogIAkgIEVYVFdBVC5zZXQoIkVYUExQUyIsIHBscHMudG9JbnRlZ2VyKCkpOw0KICAJfQ0KICAJaWYgKCFwbHAyLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWFBMUDIiLCBwbHAyLnRvSW50ZWdlcigpKTsNCiAgCX0NCiAgCWlmICghY3Bwci5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhDUFBSIiwgRG91YmxlLnBhcnNlRG91YmxlKGNwcHIpKTsNCiAgCX0gIAkNCiAgCWlmICghY2FtdC5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhDQU1UIiwgRG91YmxlLnBhcnNlRG91YmxlKGNhbXQpKTsNCiAgCX0gIAkNCiAgCWlmICghY2xhbS5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhDTEFNIiwgRG91YmxlLnBhcnNlRG91YmxlKGNsYW0pKTsNCiAgCX0gIAkNCiAgCWlmICghc2l0ZS5pc0VtcHR5KCkpIHsNCiAgCSAgRVhUV0FULnNldCgiRVhTSVRFIiwgc2l0ZSk7DQogIAl9ICAJDQogIAlpZiAoIXJlc3AuaXNFbXB0eSgpKSB7DQogIAkgIEVYVFdBVC5zZXQoIkVYUkVTUCIsIHJlc3ApOw0KICAJfSAgCQ0KICAJaWYgKCFjcmlkLmlzRW1wdHkoKSkgew0KICAJICBFWFRXQVQuc2V0KCJFWENSSUQiLCBjcmlkKTsNCiAgCX0gIAkNCiAgICBhY3Rpb25FWFRXQVQuaW5zZXJ0KEVYVFdBVCwgcmVjb3JkRXhpc3RzKTsNCgl9DQogIC8qKg0KICAgKiByZWNvcmRFeGlzdHMgLSByZXR1cm4gcmVjb3JkIGFscmVhZHkgZXhpc3RzIGVycm9yIG1lc3NhZ2UgdG8gdGhlIE1JDQogICAqDQogICovDQogIENsb3N1cmUgcmVjb3JkRXhpc3RzID0gew0KCSAgbWkuZXJyb3IoIlJlY29yZCBhbHJlYWR5IGV4aXN0cyIpOw0KICB9DQogIA0KfQ==\"}}}"}