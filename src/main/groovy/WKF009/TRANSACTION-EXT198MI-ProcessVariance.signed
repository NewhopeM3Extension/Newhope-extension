{"signature":"Arc+4J4iBDa6dZw6k9lH+grRO8LKq67u+iHu7Q/LIYSFqh3yB6+wnt59GMpAUUkLZUCkhEgiPgrNCnBispdWG99FurWlDZDOLuGnlnUUs3X1WylFdSdbPbVNlIKr9RMe6fCSV4wvSG8DpEILgTgKiQjlTx8sDWrExYoE2Jo0sR8HrNySLTY0mO+rhmMtwOvYbN28I1cWyt3T1V5XITs6frhFdwCBZ9uPUf9FMMG8LKKYf8Q3WgSwygK/u8Wzf9nCrisor22V631tUGPUYRXoBxqcowqhMCv9tM++TLhhx/cFQe4KgHri3iQVPoYvwhhidZ5LQZa+Wg0jH2WOwCyJL1E3MOlMVlXUhSDc47+wpnOKVPSucL8QRns8ZETookAiMDdMEbhxH6wTVuB8rWlPNzAXkjRf9+U7DIbcCqk35CwQrTSdJ9HnajUkT8P0QOBDYzoKg/m4l7RPSV8bDq/O+1kOWJwynN44zpBsdtueMxkTprzKwy1ZgpM1qTDWOdJ/BhdzepWjOx65VKlhTWO/d2S039jE3WN/NwgQIG91EzcewoM0QyDliko0Pdp3rYh4YARi2qYO1fxDn/JPDgBZ8iY+CSn17QXX4bMbE42z6IPv37NYnIL/k6mv2QcquW7hcprhkGkFNZdIwX0Qf80UCubneATwuEzk+K/5psw+AXzA","signedBy":"XtendM3 Team","signed":1726826261776,"message":"Signed by XtendM3 Team","extension":"{\"programModules\":{\"EXT198MI\":{\"program\":\"EXT198MI\",\"triggers\":{},\"transactions\":{\"ProcessVariance\":{\"sourceUuid\":\"deb5a11f-ccd8-4e09-95da-8c3408862174\",\"name\":\"ProcessVariance\",\"program\":\"EXT198MI\",\"description\":\"Process Invoice Variance Recodes\",\"active\":true,\"multi\":false,\"modified\":1722864077231,\"modifiedBy\":\"WLAM\",\"outputFields\":[],\"inputFields\":[],\"utilities\":[]}},\"batches\":{}}},\"utilities\":{},\"sources\":{\"deb5a11f-ccd8-4e09-95da-8c3408862174\":{\"uuid\":\"deb5a11f-ccd8-4e09-95da-8c3408862174\",\"updated\":1724811078074,\"updatedBy\":\"WLAM\",\"created\":1722864055573,\"createdBy\":\"WLAM\",\"apiVersion\":\"0.21\",\"beVersion\":\"16.0.0.20240621022400.5\",\"codeHash\":\"164593559B79C316131A46D09685015739C1B600866AD9C9CC261D69AEE2EDD9\",\"code\":\"LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICBOT1RJQ0UgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICogICBUSElTIFNPRlRXQVJFIElTIFRIRSBQUk9QRVJUWSBPRiBBTkQgQ09OVEFJTlMgICAgICAgICAgICAgKg0KICogICBDT05GSURFTlRJQUwgSU5GT1JNQVRJT04gT0YgSU5GT1IgQU5EL09SIElUUyBBRkZJTElBVEVTICAgKg0KICogICBPUiBTVUJTSURJQVJJRVMgQU5EIFNIQUxMIE5PVCBCRSBESVNDTE9TRUQgV0lUSE9VVCBQUklPUiAgKg0KICogICBXUklUVEVOIFBFUk1JU1NJT04uIExJQ0VOU0VEIENVU1RPTUVSUyBNQVkgQ09QWSBBTkQgICAgICAgKg0KICogICBBREFQVCBUSElTIFNPRlRXQVJFIEZPUiBUSEVJUiBPV04gVVNFIElOIEFDQ09SREFOQ0UgV0lUSCAgKg0KICogICBUSEUgVEVSTVMgT0YgVEhFSVIgU09GVFdBUkUgTElDRU5TRSBBR1JFRU1FTlQuICAgICAgICAgICAgKg0KICogICBBTEwgT1RIRVIgUklHSFRTIFJFU0VSVkVELiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICogICAoYykgQ09QWVJJR0hUIDIwMjAgSU5GT1IuICBBTEwgUklHSFRTIFJFU0VSVkVELiAgICAgICAgICAgKg0KICogICBUSEUgV09SRCBBTkQgREVTSUdOIE1BUktTIFNFVCBGT1JUSCBIRVJFSU4gQVJFICAgICAgICAgICAgKg0KICogICBUUkFERU1BUktTIEFORC9PUiBSRUdJU1RFUkVEIFRSQURFTUFSS1MgT0YgSU5GT1IgICAgICAgICAgKg0KICogICBBTkQvT1IgSVRTIEFGRklMSUFURVMgQU5EIFNVQlNJRElBUklFUy4gQUxMIFJJR0hUUyAgICAgICAgKg0KICogICBSRVNFUlZFRC4gIEFMTCBPVEhFUiBUUkFERU1BUktTIExJU1RFRCBIRVJFSU4gQVJFICAgICAgICAgKg0KICogICBUSEUgUFJPUEVSVFkgT0YgVEhFSVIgUkVTUEVDVElWRSBPV05FUlMuICAgICAgICAgICAgICAgICAgKg0KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICovDQogDQogaW1wb3J0IGdyb292eS5sYW5nLkNsb3N1cmU7DQogaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGU7DQogaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lOw0KIGltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyOw0KIGltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcjsNCiBpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkV4Y2VwdGlvbg0KIGltcG9ydCBncm9vdnkueG1sLio7DQogaW1wb3J0IGdyb292eS51dGlsLio7DQogaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsOw0KIGltcG9ydCBqYXZhLm1hdGguUm91bmRpbmdNb2RlOw0KIGltcG9ydCBqYXZhLnRleHQuRGVjaW1hbEZvcm1hdDsNCiBpbXBvcnQgamF2YS50aW1lLlpvbmVJZDsNCiANCi8qDQoqIE1vZGlmaWNhdGlvbiBhcmVhIC0gTTMNCiogTmJyICAgICAgICAgICAgICAgRGF0ZSAgICAgIFVzZXIgaWQgICAgIERlc2NyaXB0aW9uDQoqIFdLRjAwOSAgICAgICAgICAgIDIwMjMwOTI3ICBLVkVSQ08gICAgICBTdXBwbGllciBpbnZvaWNlIHZhcmlhbmNlIHJlY29kaW5nDQoqIFdLRjAwOSAgICAgICAgICAgIDIwMjQwMzA4ICBLVkVSQ08gICAgICBTZXQgYWNjb3VudGluZyBkYXRlIGFjY29yZGluZyB0byBvcGVuIHBlcmlvZCArIGltcHJvdmUgbG9nZ2luZyBhbmQgZXJyb3IgY29kZXMNCiogV0tGMDA5ICAgICAgICAgICAgMjAyNDA1MjggIEtWRVJDTyAgICAgIENoZWNrIGZvciB2b3VjaGVycyB3aGVyZSBMc3RWb3VjaGVyTGluZXMgcmV0dXJucyBub3RoaW5nDQoqIFdLRjAwOSAgICAgICAgICAgIDIwMjQwNzMxICBLVkVSQ08gICAgICBVc2UgQ1VBTSBpbnN0ZWFkIEFDQU0gd2hlbiBjYWxsIGFwaSBBUFM0NTBNSS9BZGRMaW5lUmVjb2RlDQoqLw0KIA0KLyoqDQoqIFByb2Nlc3NWYXJpYW5jZSAtIENoZWNrIGZvciBTdXBwbGllciBJbnZvaWNlIHZhcmlhbmNlcyBhbmQgcmVjb2RlIHRvIHB1cmNoYXNlIGFjY291bnRpbmcgc3RyaW5nDQoqDQoqLw0KcHVibGljIGNsYXNzIFByb2Nlc3NWYXJpYW5jZSBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIElvbkFQSSBpb247DQogIHByaXZhdGUgZmluYWwgTG9nZ2VyQVBJIGxvZ2dlcjsNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZTsNCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcjsNCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW07DQogIA0KICBwcml2YXRlIFN0cmluZyBQUk9DOw0KICBwcml2YXRlIFN0cmluZyBjb25vOw0KICBwcml2YXRlIFN0cmluZyBwdW5vOw0KICBwcml2YXRlIFN0cmluZyBwbmxpOw0KICBwcml2YXRlIFN0cmluZyBwbmxzOw0KICANCiAgcHJpdmF0ZSBpbnQgWFhDT05POw0KICBwcml2YXRlIFN0cmluZyBub3NlcmllczAxOw0KICBwcml2YXRlIGludCBjdXJyZW50RGF0ZTsNCiAgcHJpdmF0ZSBpbnQgY3VycmVudFRpbWUNCg0KICBwdWJsaWMgUHJvY2Vzc1ZhcmlhbmNlKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIExvZ2dlckFQSSBsb2dnZXIsIFByb2dyYW1BUEkgcHJvZ3JhbSwgSW9uQVBJIGlvbikgew0KICAgIHRoaXMubWkgPSBtaTsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyOw0KICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyOw0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07DQogICAgdGhpcy5pb24gPSBpb247DQogIH0NCiAgDQogIA0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIA0KICAgIFhYQ09OTyA9IHByb2dyYW0uTERBWkQuQ09OTzsNCiAgICBjb25vID0gWFhDT05PLnRvU3RyaW5nKCk7DQogDQogICAgDQogICAgWm9uZUlkIHppZCA9IFpvbmVJZC5vZigiQXVzdHJhbGlhL1N5ZG5leSIpOyANCiAgICBjdXJyZW50RGF0ZSA9IExvY2FsRGF0ZS5ub3coemlkKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKTsNCiAgICBjdXJyZW50VGltZSA9IEludGVnZXIudmFsdWVPZihMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKSk7DQogICAgDQoNCiAgICBEQkFjdGlvbiBxdWVyeUVYVFZBUiA9IGRhdGFiYXNlLnRhYmxlKCJFWFRWQVIiKS5pbmRleCgiMTAiKS5zZWxlY3Rpb24oIkVYRElWSSIsICJFWFlFQTQiLCAiRVhKUk5PIiwgIkVYSlNOTyIsICJFWFBST0MiLCAiRVhDSE5PIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBFWFRWQVIgPSBxdWVyeUVYVFZBUi5nZXRDb250YWluZXIoKTsNCiAgCUVYVFZBUi5zZXQoIkVYQ09OTyIsIFhYQ09OTyk7DQogIAlFWFRWQVIuc2V0KCJFWFBST0MiLCAwKTsNCiAgCXF1ZXJ5RVhUVkFSLnJlYWRBbGwoRVhUVkFSLCAyLCAyMCwgbGlzdEVYVFZBUik7DQogIAkNCiAgfQ0KDQogIC8qKg0KICAqIGxpc3RFWFRWQVIgLSBDYWxsYmFjayBmdW5jdGlvbiB0byByZXR1cm4gRVhUVkFSDQogICoNCiAgKi8NCiAgQ2xvc3VyZTw/PiBsaXN0RVhUVkFSID0geyBEQkNvbnRhaW5lciBFWFRWQVIgLT4NCiAgICANCiAgICBTdHJpbmcgZGl2aSA9IEVYVFZBUi5nZXQoIkVYRElWSSIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIFN0cmluZyB5ZWE0ID0gRVhUVkFSLmdldCgiRVhZRUE0IikudG9TdHJpbmcoKS50cmltKCk7DQogICAgU3RyaW5nIGpybm8gPSBFWFRWQVIuZ2V0KCJFWEpSTk8iKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICBTdHJpbmcganNubyA9IEVYVFZBUi5nZXQoIkVYSlNOTyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIA0KICAgIERCQWN0aW9uIHF1ZXJ5RkdMRURHID0gZGF0YWJhc2UudGFibGUoIkZHTEVERyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRUdESVZJIiwgIkVHWUVBNCIsICJFR0pSTk8iLCAiRUdKU05PIiwgIkVHVk9OTyIsICJFR1ZTRVIiLCAiRUdBSVQxIiwgIkVHQUlUMiIsICJFR0FJVDMiLCAiRUdBSVQ0IiwgIkVHQUlUNSIsICJFR0FJVDYiLCAiRUdBSVQ3IiwgIkVHQUNBTSIsICJFR0NVQU0iLCJFR0FDUVQiLCAiRUdWVENEIiwgIkVHQUNEVCIsICJFR1ZUWFQiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIEZHTEVERyA9IHF1ZXJ5RkdMRURHLmdldENvbnRhaW5lcigpOw0KICAgIEZHTEVERy5zZXQoIkVHQ09OTyIsIFhYQ09OTyk7DQogICAgRkdMRURHLnNldCgiRUdESVZJIiwgZGl2aSk7DQogICAgRkdMRURHLnNldCgiRUdZRUE0IiwgeWVhNC50b0ludGVnZXIoKSk7DQogICAgRkdMRURHLnNldCgiRUdKUk5PIiwganJuby50b0ludGVnZXIoKSk7DQogICAgRkdMRURHLnNldCgiRUdKU05PIiwganNuby50b0ludGVnZXIoKSk7DQogICAgDQogICAgaWYgKHF1ZXJ5RkdMRURHLnJlYWQoRkdMRURHKSkgew0KICAgICAgU3RyaW5nIHZvbm8gPSBGR0xFREcuZ2V0KCJFR1ZPTk8iKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIFN0cmluZyB2dHh0ID0gRkdMRURHLmdldCgiRUdWVFhUIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICANCiAgICAgIGJvb2xlYW4gaXNSZWNvZGVkID0gZmFsc2U7DQogICAgICBpZiAodnR4dC5sZW5ndGgoKSA+PSA0MCkgew0KICAgICAgICBTdHJpbmcgcG9zNDAgPSB2dHh0LnN1YnN0cmluZygzOSw0MCk7DQogICAgICAgIGlmIChwb3M0MC5lcXVhbHMoIlgiKSkgew0KICAgICAgICAgIGlzUmVjb2RlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChpc1JlY29kZWQpIHsNCiAgICAgICAgUFJPQyA9ICIiOw0KICAgICAgICB1cGRhdGVQcm9jZXNzRmxhZyhkaXZpLCB5ZWE0LCBqcm5vLCBqc25vLCAiOCIpOw0KICAgICAgICBsb2dnZXIuZGVidWcoIkZHTEVERyBlbnRyeSBpcyBhIHJlY29kZSBsaW5lLiBEaXZpc2lvbiAtIiArIGRpdmkgKyAiLCB5ZWFyLSIgKyB5ZWE0ICsgIiwgam91cm5hbC0iICsganJubyArICIsIGpvdXJuYWwgc2VxLSIgKyBqc25vKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJlY29kaW5nVmFyaWFuY2UoRkdMRURHKTsNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgUFJPQyA9ICIiOw0KICAgICAgdXBkYXRlUHJvY2Vzc0ZsYWcoZGl2aSwgeWVhNCwganJubywganNubywgIjciKTsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiTm8gRkdMRURHIGVudHJ5IGZvdW5kIGZvciBkaXZpc2lvbi0iICsgZGl2aSArICIsIHllYXItIiArIHllYTQgKyAiLCBqb3VybmFsLSIgKyBqcm5vICsgIiwgam91cm5hbCBzZXEtIiArIGpzbm8pOw0KICAgIH0NCiAgfQ0KICANCiAgLyoqDQogICAqIHJlY29kaW5nVmFyaWFuY2UgLSByZWNvcmRpbmcgdGhlIHZhcmlhbmNlIHRocm91Z2ggQVBTNDUwTUkNCiAgICoNCiAgKi8NCiAgdm9pZCByZWNvZGluZ1ZhcmlhbmNlKERCQ29udGFpbmVyIEZHTEVERykgeyAgDQogICAgU3RyaW5nIGpybm9GUExFREcgPSAiIjsNCiAgICBTdHJpbmcganNub0ZQTEVERyA9ICIiOw0KICAgIA0KICAgIFN0cmluZyBkaXZpID0gRkdMRURHLmdldCgiRUdESVZJIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgU3RyaW5nIHllYTQgPSBGR0xFREcuZ2V0KCJFR1lFQTQiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICBTdHJpbmcganJubyA9IEZHTEVERy5nZXQoIkVHSlJOTyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIFN0cmluZyBqc25vID0gRkdMRURHLmdldCgiRUdKU05PIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgU3RyaW5nIHZvbm8gPSBGR0xFREcuZ2V0KCJFR1ZPTk8iKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICBTdHJpbmcgdnNlciA9IEZHTEVERy5nZXQoIkVHVlNFUiIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIA0KICAgIFN0cmluZyBhaXQxID0gRkdMRURHLmdldCgiRUdBSVQxIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgU3RyaW5nIGFpdDIgPSBGR0xFREcuZ2V0KCJFR0FJVDIiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICBTdHJpbmcgYWl0MyA9IEZHTEVERy5nZXQoIkVHQUlUMyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIFN0cmluZyBhaXQ0ID0gRkdMRURHLmdldCgiRUdBSVQ0IikudG9TdHJpbmcoKS50cmltKCk7DQogICAgU3RyaW5nIGFpdDUgPSBGR0xFREcuZ2V0KCJFR0FJVDUiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICBTdHJpbmcgYWl0NiA9IEZHTEVERy5nZXQoIkVHQUlUNiIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIFN0cmluZyBhaXQ3ID0gRkdMRURHLmdldCgiRUdBSVQ3IikudG9TdHJpbmcoKS50cmltKCk7DQogICAgU3RyaW5nIGFjYW0gPSBGR0xFREcuZ2V0KCJFR0FDQU0iKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICBTdHJpbmcgY3VhbSA9IEZHTEVERy5nZXQoIkVHQ1VBTSIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIFN0cmluZyBhY3F0ID0gRkdMRURHLmdldCgiRUdBQ1FUIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgU3RyaW5nIHZ0Y2QgPSBGR0xFREcuZ2V0KCJFR1ZUQ0QiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICBTdHJpbmcgYWNkdCA9IEZHTEVERy5nZXQoIkVHQUNEVCIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIFN0cmluZyB2dHh0ID0gRkdMRURHLmdldCgiRUdWVFhUIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXMgPSBbIkRJVkkiOmRpdmksICJZRUE0Ijp5ZWE0LCAiVlNFUiI6IiIsICJWT05PIjp2b25vXTsNCiAgICAgIA0KICAgIENsb3N1cmU8Pz4gR0xTMjAwTUljYWxsYmFjayA9IHsNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIA0KICAgICAgaWYocmVzcG9uc2UuVFJDRCAhPSBudWxsICYmIHJlc3BvbnNlLlRSQ0QuZXF1YWxzKCI0MCIpKSB7DQogICAgICAgIGpybm9GUExFREcgPSByZXNwb25zZS5KUk5PLnRyaW0oKTsNCiAgICAgICAganNub0ZQTEVERyA9IHJlc3BvbnNlLkpTTk8udHJpbSgpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIG1pQ2FsbGVyLmNhbGwoIkdMUzIwME1JIiwgIkxzdFZvdWNoZXJMaW5lcyIsIHBhcmFtcywgR0xTMjAwTUljYWxsYmFjayk7DQogICAgDQogICAgaWYgKGpybm9GUExFREcuaXNFbXB0eSgpKSB7DQogICAgICBQUk9DID0gIiI7DQogICAgICB1cGRhdGVQcm9jZXNzRmxhZyhkaXZpLCB5ZWE0LCBqcm5vLCBqc25vLCAiNyIpOw0KICAgICAgbG9nZ2VyLmRlYnVnKCJObyBHTFMyMDBNSSByb3dzIGZvdW5kIGZvciBkaXZpc2lvbi0iICsgZGl2aSArICIsIHllYXItIiArIHllYTQgKyAiLCBqb3VybmFsLSIgKyBqcm5vICsgIiwgam91cm5hbCBzZXEtIiArIGpzbm8pOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeUZQTEVERyA9IGRhdGFiYXNlLnRhYmxlKCJGUExFREciKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkVQU1VOTyIsICJFUFNQWU4iLCAiRVBTSU5PIiwgIkVQSU5ZUiIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgRlBMRURHID0gcXVlcnlGUExFREcuZ2V0Q29udGFpbmVyKCk7DQogICAgRlBMRURHLnNldCgiRVBDT05PIiwgWFhDT05PKTsNCiAgICBGUExFREcuc2V0KCJFUERJVkkiLCBkaXZpKTsNCiAgICBGUExFREcuc2V0KCJFUFlFQTQiLCB5ZWE0LnRvSW50ZWdlcigpKTsNCiAgICBGUExFREcuc2V0KCJFUEpSTk8iLCBqcm5vRlBMRURHLnRvSW50ZWdlcigpKTsNCiAgICBGUExFREcuc2V0KCJFUEpTTk8iLCBqc25vRlBMRURHLnRvSW50ZWdlcigpKTsNCiAgICANCiAgICBpZiAoIXF1ZXJ5RlBMRURHLnJlYWQoRlBMRURHKSkgew0KICAgICAgUFJPQyA9ICIiOw0KICAgICAgdXBkYXRlUHJvY2Vzc0ZsYWcoZGl2aSwgeWVhNCwganJubywganNubywgIjciKTsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiTm8gRlBMRURHIGVudHJ5IGZvdW5kIGZvciBkaXZpc2lvbi0iICsgZGl2aSArICIsIHllYXItIiArIHllYTQgKyAiLCBqb3VybmFsLSIgKyBqcm5vICsgIiwgam91cm5hbCBzZXEtIiArIGpzbm8pOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICANCiAgICBTdHJpbmcgc3VubyA9IEZQTEVERy5nZXQoIkVQU1VOTyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIFN0cmluZyBzeXBuID0gRlBMRURHLmdldCgiRVBTUFlOIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgU3RyaW5nIHNpbm8gPSBGUExFREcuZ2V0KCJFUFNJTk8iKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICBTdHJpbmcgaW55ciA9IEZQTEVERy5nZXQoIkVQSU5ZUiIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIGxvZ2dlci5kZWJ1ZygiU1VOTz0iICsgc3VubyArICIgU0lOTz0iICsgc2lubyArICIgSU5ZUj0iICsgaW55cik7DQogICAgDQogICAgaWYgKHNpbm8uaXNFbXB0eSgpKSB7DQogICAgICBQUk9DID0gIiI7DQogICAgICB1cGRhdGVQcm9jZXNzRmxhZyhkaXZpLCB5ZWE0LCBqcm5vLCBqc25vLCAiNyIpOw0KICAgICAgbG9nZ2VyLmRlYnVnKCJObyBGUExFREcgVFJDRD00MCBkZXRhaWxzIGZvdW5kIGZvciBkaXZpc2lvbi0iICsgZGl2aSArICIsIHllYXItIiArIHllYTQgKyAiLCBqb3VybmFsLSIgKyBqcm5vICsgIiwgam91cm5hbCBzZXEtIiArIGpzbm8pOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICANCiAgICBwdW5vID0gIiI7DQogICAgcG5saSA9ICIiOw0KICAgIHBubHMgPSAiIjsNCiAgICANCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHByZXNzaW9uID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkZHSU5BRSIpOw0KICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmVxKCJGOUFJVDEiLCBhaXQxKTsNCiAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5hbmQoZXhwcmVzc2lvbi5lcSgiRjlBSVQyIiwgYWl0MikpOw0KICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmFuZChleHByZXNzaW9uLmVxKCJGOUFJVDMiLCBhaXQzKSk7DQogICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uYW5kKGV4cHJlc3Npb24uZXEoIkY5QUlUNCIsIGFpdDQpKTsNCiAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5hbmQoZXhwcmVzc2lvbi5lcSgiRjlBSVQ1IiwgYWl0NSkpOw0KICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmFuZChleHByZXNzaW9uLmVxKCJGOUFJVDYiLCBhaXQ2KSk7DQogICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uYW5kKGV4cHJlc3Npb24uZXEoIkY5QUlUNyIsIGFpdDcpKTsNCiAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5hbmQoZXhwcmVzc2lvbi5lcSgiRjlBQ0FNIiwgYWNhbSkpOw0KICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmFuZChleHByZXNzaW9uLmVxKCJGOUNVQU0iLCBjdWFtKSk7DQogICAgDQogICAgLy9DaGVjayBmb3IgYW4gYWNjb3VudGluZyBsaW5lIG9uIGEgbm9uLUF2ZXJhZ2UgQ29zdCBWYXJpYW5jZQ0KICAgIERCQWN0aW9uIHF1ZXJ5RkdJTkFFID0gZGF0YWJhc2UudGFibGUoIkZHSU5BRSIpLmluZGV4KCIwMCIpLm1hdGNoaW5nKGV4cHJlc3Npb24pLnNlbGVjdGlvbigiRjlQVU5PIiwgIkY5UE5MSSIsICJGOVBOTFMiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIEZHSU5BRSA9IHF1ZXJ5RkdJTkFFLmdldENvbnRhaW5lcigpOw0KICAgIEZHSU5BRS5zZXQoIkY5Q09OTyIsIFhYQ09OTyk7DQogICAgRkdJTkFFLnNldCgiRjlESVZJIiwgZGl2aSk7DQogICAgRkdJTkFFLnNldCgiRjlTVU5PIiwgc3Vubyk7DQogICAgRkdJTkFFLnNldCgiRjlTSU5PIiwgc2lubyk7DQogICAgRkdJTkFFLnNldCgiRjlJTllSIiwgaW55ci50b0ludGVnZXIoKSk7DQogICAgRkdJTkFFLnNldCgiRjlJTklUIiwgIjEyIik7DQogICANCiAgICBxdWVyeUZHSU5BRS5yZWFkQWxsKEZHSU5BRSwgNiwgMSwgbHN0RkdJTkFFKTsNCiAgICANCiAgICBpZiAocHVuby5pc0VtcHR5KCkgJiYgcG5saS5pc0VtcHR5KCkpIHsNCiAgICAvL0NoZWNrIGZvciBhbiBhY2NvdW50aW5nIGxpbmUgb24gYW4gQXZlcmFnZSBDb3N0IFZhcmlhbmNlDQogICAgICBxdWVyeUZHSU5BRSA9IGRhdGFiYXNlLnRhYmxlKCJGR0lOQUUiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHByZXNzaW9uKS5zZWxlY3Rpb24oIkY5UFVOTyIsICJGOVBOTEkiLCAiRjlQTkxTIikuYnVpbGQoKTsNCiAgICAgIEZHSU5BRSA9IHF1ZXJ5RkdJTkFFLmdldENvbnRhaW5lcigpOw0KICAgICAgRkdJTkFFLnNldCgiRjlDT05PIiwgWFhDT05PKTsNCiAgICAgIEZHSU5BRS5zZXQoIkY5RElWSSIsIGRpdmkpOw0KICAgICAgRkdJTkFFLnNldCgiRjlTVU5PIiwgc3Vubyk7DQogICAgICBGR0lOQUUuc2V0KCJGOVNJTk8iLCBzaW5vKTsNCiAgICAgIEZHSU5BRS5zZXQoIkY5SU5ZUiIsIGlueXIudG9JbnRlZ2VyKCkpOw0KICAgICAgRkdJTkFFLnNldCgiRjlJTklUIiwgIjExIik7DQogICANCiAgICAgIHF1ZXJ5RkdJTkFFLnJlYWRBbGwoRkdJTkFFLCA2LCAxLCBsc3RGR0lOQUUpOw0KICAgIA0KICAgICBpZiAocHVuby5pc0VtcHR5KCkgJiYgcG5saS5pc0VtcHR5KCkpIHsNCiAgICAgIFBST0MgPSAiIjsNCiAgICAgIHVwZGF0ZVByb2Nlc3NGbGFnKGRpdmksIHllYTQsIGpybm8sIGpzbm8sICIyIik7DQogICAgICBsb2dnZXIuZGVidWcoIk5vIEZHSU5BRSBlbnRyeSBmb3VuZCBmb3IgZGl2aXNpb24tIiArIGRpdmkgKyAiLCBzdXBwbGllci0iICsgc3VubyArICIsIGludm9pY2UtIiArIHNpbm8pOw0KICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvL0NoZWNrIGlmIENBQ0NTVCBoYXMgYW4gYWNjb3VudGluZyBzdHJpbmcgZm9yIHRoZSBQTyBsaW5lDQogICAgREJBY3Rpb24gcXVlcnlDQUNDU1QgPSBkYXRhYmFzZS50YWJsZSgiQ0FDQ1NUIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJTQ0FJVDEiLCAiU0NBSVQyIiwgIlNDQUlUMyIsICJTQ0FJVDQiLCAiU0NBSVQ1IiwgIlNDQUlUNiIsICJTQ0FJVDciKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIENBQ0NTVCA9IHF1ZXJ5Q0FDQ1NULmdldENvbnRhaW5lcigpOw0KICAgIENBQ0NTVC5zZXQoIlNDQ09OTyIsIFhYQ09OTyk7DQogICAgQ0FDQ1NULnNldCgiU0NSSUROIiwgcHVubyk7DQogICAgQ0FDQ1NULnNldCgiU0NSSURMIiwgcG5saS50b0ludGVnZXIoKSk7DQogICAgQ0FDQ1NULnNldCgiU0NSSURYIiwgcG5scy50b0ludGVnZXIoKSk7DQogICAgQ0FDQ1NULnNldCgiU0NPUkNBIiwgIjI1MSIpOw0KICAgIENBQ0NTVC5zZXQoIlNDT1JDQSIsICIyNTEiKTsNCiAgICBDQUNDU1Quc2V0KCJTQ0VWRU4iLCAiUFAxMCIpOw0KICAgIENBQ0NTVC5zZXQoIlNDQUNUWSIsICI5MDMiKTsNCiAgICANCiAgICBTdHJpbmcgYWl0MUNBQ0NTVCA9ICIiOw0KICAgIFN0cmluZyBhaXQyQ0FDQ1NUID0gIiI7DQogICAgU3RyaW5nIGFpdDNDQUNDU1QgPSAiIjsNCiAgICBTdHJpbmcgYWl0NENBQ0NTVCA9ICIiOw0KICAgIFN0cmluZyBhaXQ1Q0FDQ1NUID0gIiI7DQogICAgU3RyaW5nIGFpdDZDQUNDU1QgPSAiIjsNCiAgICBTdHJpbmcgYWl0N0NBQ0NTVCA9ICIiOw0KICAgIA0KICAgIGlmICghcXVlcnlDQUNDU1QucmVhZChDQUNDU1QpKSB7DQoNCiAgICAgIC8vSWYgbm8gQ0FDQ1NUIGlzIGZvdW5kLCBjaGVjayBpZiBQTyBsaW5lIGlzIGZyb20gYSBXb3JrIE9yZGVyIG9yIGlzIGludmVudG9yeSBhbmQgcmV0cmlldmUgYWNjb3VudGluZyBzdHJpbmdzIGZyb20gQ1JTMzk5DQogICAgICBEQkFjdGlvbiBxdWVyeU1QTElORSA9IGRhdGFiYXNlLnRhYmxlKCJNUExJTkUiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklCUE9UQyIsICJJQlJPUkMiLCAiSUJST1JOIiwgIklCUk9STCIsICJJQkZBQ0kiLCAiSUJSR0RUIiwgIklCSVROTyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBNUExJTkUgPSBxdWVyeU1QTElORS5nZXRDb250YWluZXIoKTsNCiAgICAgIE1QTElORS5zZXQoIklCQ09OTyIsIFhYQ09OTyk7DQogICAgICBNUExJTkUuc2V0KCJJQlBVTk8iLCBwdW5vKTsNCiAgICAgIE1QTElORS5zZXQoIklCUE5MSSIsIHBubGkudG9JbnRlZ2VyKCkpOw0KICAgICAgTVBMSU5FLnNldCgiSUJQTkxTIiwgcG5scy50b0ludGVnZXIoKSk7DQogICAgDQogICAgICBpZiAoIXF1ZXJ5TVBMSU5FLnJlYWQoTVBMSU5FKSkgew0KICAgICAgICBQUk9DID0gIiI7DQogICAgICAgIHVwZGF0ZVByb2Nlc3NGbGFnKGRpdmksIHllYTQsIGpybm8sIGpzbm8sICIyIik7DQogICAgICAgIGxvZ2dlci5kZWJ1ZygiUE8gTGluZSBub3QgZm91bmQgaW4gTVBMSU5FIC0gIiArIHB1bm8gKyAiLyIgKyBwbmxpICsgIi8iICsgcG5scyArICIgZm9yIGRpdmlzaW9uLSIgKyBkaXZpICsgIiwgc3VwcGxpZXItIiArIHN1bm8gKyAiLCBpbnZvaWNlLSIgKyBzaW5vKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfSANCiAgICAgIFN0cmluZyBwb3RjTVBMSU5FID0gTVBMSU5FLmdldCgiSUJQT1RDIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICBTdHJpbmcgcm9yY01QTElORSA9IE1QTElORS5nZXQoIklCUk9SQyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgU3RyaW5nIHJvcm5NUExJTkUgPSBNUExJTkUuZ2V0KCJJQlJPUk4iKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIFN0cmluZyByb3JsTVBMSU5FID0gTVBMSU5FLmdldCgiSUJST1JMIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICBTdHJpbmcgZmFjaU1QTElORSA9IE1QTElORS5nZXQoIklCRkFDSSIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgU3RyaW5nIHJnZHRNUExJTkUgPSBNUExJTkUuZ2V0KCJJQlJHRFQiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIFN0cmluZyBpdG5vTVBMSU5FID0gTVBMSU5FLmdldCgiSUJJVE5PIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICBTdHJpbmcgREQgPSByZ2R0TVBMSU5FLnN1YnN0cmluZyg2LDgpOw0KICAgICAgU3RyaW5nIE1NID0gcmdkdE1QTElORS5zdWJzdHJpbmcoNCw2KTsNCiAgICAgIFN0cmluZyBZWSA9IHJnZHRNUExJTkUuc3Vic3RyaW5nKDIsNCk7DQogICAgICBTdHJpbmcgcmdkdERETU1ZWSA9ICIke0REfSR7TU19JHtZWX0iOw0KDQogICAgICAvL0NoZWNrIGlmIFBPIExpbmUgY29tZXMgZnJvbSBhIFJlcGFpciBvciBTdWJjb250cmFjdCBXb3JrIE9yZGVyIC0gYWNjb3VudGluZyBldmVudCBNTzIwLTkyMA0KICAgICAgaWYgKHJvcmNNUExJTkUuZXF1YWxzKCI2IikgJiYgKHBvdGNNUExJTkUuZXF1YWxzKCI2MCIpIHx8IHBvdGNNUExJTkUuZXF1YWxzKCI3MCIpKSkgew0KICAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJzQWNjb3VudHMgPSBnZXRSZXBTdWJXb3JrT3JkZXJBY2NvdW50cyhjb25vLGRpdmkscmdkdERETU1ZWSxpdG5vTVBMSU5FLHJvcm5NUExJTkUscm9ybE1QTElORSxmYWNpTVBMSU5FLCIwIik7DQogICAgICAgIGFpdDFDQUNDU1QgPSByc0FjY291bnRzLmdldCgiQUlUMSIpLnRyaW0oKTsNCiAgICAgICAgYWl0MkNBQ0NTVCA9IHJzQWNjb3VudHMuZ2V0KCJBSVQyIikudHJpbSgpOw0KICAgICAgICBhaXQzQ0FDQ1NUID0gcnNBY2NvdW50cy5nZXQoIkFJVDMiKS50cmltKCk7DQogICAgICAgIGFpdDRDQUNDU1QgPSByc0FjY291bnRzLmdldCgiQUlUNCIpLnRyaW0oKTsNCiAgICAgICAgYWl0NUNBQ0NTVCA9IHJzQWNjb3VudHMuZ2V0KCJBSVQ1IikudHJpbSgpOw0KICAgICAgICBhaXQ2Q0FDQ1NUID0gcnNBY2NvdW50cy5nZXQoIkFJVDYiKS50cmltKCk7DQogICAgICAgIGFpdDdDQUNDU1QgPSByc0FjY291bnRzLmdldCgiQUlUNyIpLnRyaW0oKTsNCiAgICAgICAgbG9nZ2VyLmRlYnVnKCJSZXBhaXIgb3IgU3ViY29udHJhY3QgLSBhaXQxPSIgKyBhaXQxQ0FDQ1NUICsgIiBhaXQyPSIgKyBhaXQyQ0FDQ1NUKTsNCiAgICAgIH0gDQogICAgICBlbHNlIHsNCiAgICAgICAgLy9DaGVjayBpZiBQTyBMaW5lIGNvbWVzIGZyb20gYSBOb3JtYWwgV29yayBPcmRlciAtIGFjY291bnRpbmcgZXZlbnQgTU8xMC05MTINCiAgICAgICAgaWYgKHJvcmNNUExJTkUuZXF1YWxzKCI2IikgJiYgIShwb3RjTVBMSU5FLmVxdWFscygiNjAiKSB8fCBwb3RjTVBMSU5FLmVxdWFscygiNzAiKSkpIHsNCiAgICAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHdvQWNjb3VudHMgPSBnZXRXb3JrT3JkZXJBY2NvdW50cyhjb25vLGRpdmkscmdkdERETU1ZWSxpdG5vTVBMSU5FLHJvcm5NUExJTkUscm9ybE1QTElORSk7DQogICAgICAgICAgYWl0MUNBQ0NTVCA9IHdvQWNjb3VudHMuZ2V0KCJBSVQxIikudHJpbSgpOw0KICAgICAgICAgIGFpdDJDQUNDU1QgPSB3b0FjY291bnRzLmdldCgiQUlUMiIpLnRyaW0oKTsNCiAgICAgICAgICBhaXQzQ0FDQ1NUID0gd29BY2NvdW50cy5nZXQoIkFJVDMiKS50cmltKCk7DQogICAgICAgICAgYWl0NENBQ0NTVCA9IHdvQWNjb3VudHMuZ2V0KCJBSVQ0IikudHJpbSgpOw0KICAgICAgICAgIGFpdDVDQUNDU1QgPSB3b0FjY291bnRzLmdldCgiQUlUNSIpLnRyaW0oKTsNCiAgICAgICAgICBhaXQ2Q0FDQ1NUID0gd29BY2NvdW50cy5nZXQoIkFJVDYiKS50cmltKCk7DQogICAgICAgICAgYWl0N0NBQ0NTVCA9IHdvQWNjb3VudHMuZ2V0KCJBSVQ3IikudHJpbSgpOw0KICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiV29yayBPcmRlciAtIGFpdDE9IiArIGFpdDFDQUNDU1QgKyAiIGFpdDI9IiArIGFpdDJDQUNDU1QpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAvL0NoZWNrIGlmIFBPIExpbmUgaXMgZm9yIGFuIEludmVudG9yeSBhY2NvdW50ZWQgaXRlbQ0KICAgICAgICAgIERCQWN0aW9uIHF1ZXJ5TUlUTUFTID0gZGF0YWJhc2UudGFibGUoIk1JVE1BUyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTU1TVENEIikuYnVpbGQoKTsNCiAgICAgICAgICBEQkNvbnRhaW5lciBNSVRNQVMgPSBxdWVyeU1JVE1BUy5nZXRDb250YWluZXIoKTsNCiAgICAgICAgICBNSVRNQVMuc2V0KCJNTUNPTk8iLCBYWENPTk8pOw0KICAgICAgICAgIE1JVE1BUy5zZXQoIk1NSVROTyIsIGl0bm9NUExJTkUudHJpbSgpKTsgICANCiAgICAgICAgICBpZiAoIXF1ZXJ5TUlUTUFTLnJlYWQoTUlUTUFTKSkgew0KICAgICAgICAgICAgUFJPQyA9ICIiOw0KICAgICAgICAgICAgdXBkYXRlUHJvY2Vzc0ZsYWcoZGl2aSwgeWVhNCwganJubywganNubywgIjIiKTsNCiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiTUlUTUFTIG5vdCBmb3VuZCBmb3IgaXRlbSIgKyBpdG5vTVBMSU5FLnRyaW0oKSArICIgZm9yIGRpdmlzaW9uLSIgKyBkaXZpICsgIiwgc3VwcGxpZXItIiArIHN1bm8gKyAiLCBpbnZvaWNlLSIgKyBzaW5vKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9IA0KICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgU3RyaW5nIHN0Y2RNSVRNQVMgPSBNSVRNQVMuZ2V0KCJNTVNUQ0QiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgICAgICAgIGlmIChzdGNkTUlUTUFTLmVxdWFscygiMSIpKSB7DQogICAgICAgICAgICBsb2dnZXIuZGVidWcoIlByZSBJUFMgY2FsbCAke2Nvbm99Iik7DQogICAgICAgICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gaW5BY2NvdW50cyA9IGdldEludmVudG9yeUFjY291bnRzKGNvbm8sZGl2aSxyZ2R0RERNTVlZLHB1bm8scG5saSxwbmxzKTsNCiAgICAgICAgICAgICAgYWl0MUNBQ0NTVCA9IGluQWNjb3VudHMuZ2V0KCJBSVQxIikudHJpbSgpOw0KICAgICAgICAgICAgICBhaXQyQ0FDQ1NUID0gaW5BY2NvdW50cy5nZXQoIkFJVDIiKS50cmltKCk7DQogICAgICAgICAgICAgIGFpdDNDQUNDU1QgPSBpbkFjY291bnRzLmdldCgiQUlUMyIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgYWl0NENBQ0NTVCA9IGluQWNjb3VudHMuZ2V0KCJBSVQ0IikudHJpbSgpOw0KICAgICAgICAgICAgICBhaXQ1Q0FDQ1NUID0gaW5BY2NvdW50cy5nZXQoIkFJVDUiKS50cmltKCk7DQogICAgICAgICAgICAgIGFpdDZDQUNDU1QgPSBpbkFjY291bnRzLmdldCgiQUlUNiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgYWl0N0NBQ0NTVCA9IGluQWNjb3VudHMuZ2V0KCJBSVQ3IikudHJpbSgpOw0KICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoIkludmVudG9yeSBBY2NvdW50ZWQgSXRlbSAtIGFpdDE9IiArIGFpdDFDQUNDU1QgKyAiIGFpdDI9IiArIGFpdDJDQUNDU1QpOw0KICAgICAgICAgICAgfSANCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICBQUk9DID0gIiI7DQogICAgICAgICAgICAgIHVwZGF0ZVByb2Nlc3NGbGFnKGRpdmksIHllYTQsIGpybm8sIGpzbm8sICIyIik7DQogICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiSXRlbSBkb2VzIG5vdCBtYXRjaCBjcml0ZXJpYSBmb3IgYWNjb3VudCBzaW11bGF0aW9uIC0gIiArIGl0bm9NUExJTkUudHJpbSgpICsgIiBmb3IgUE8gbGluZS0iICArIHB1bm8gKyAiLyIgKyBwbmxpICsgIi8iICsgcG5scyArICIgYW5kIGRpdmlzaW9uLSIgKyBkaXZpICsgIiwgc3VwcGxpZXItIiArIHN1bm8gKyAiLCBpbnZvaWNlLSIgKyBzaW5vKTsNCiAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgDQogICAgfQ0KICAgIC8vSWYgQ0FDQ1NUIGlzIGZvdW5kLCB1c2UgdGhlIGFjY291bnRpbmcgc3RyaW5nIGZyb20gdGhlcmUNCiAgICBlbHNlIHsNCiAgICAgIGFpdDFDQUNDU1QgPSBDQUNDU1QuZ2V0KCJTQ0FJVDEiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIGFpdDJDQUNDU1QgPSBDQUNDU1QuZ2V0KCJTQ0FJVDIiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIGFpdDNDQUNDU1QgPSBDQUNDU1QuZ2V0KCJTQ0FJVDMiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIGFpdDRDQUNDU1QgPSBDQUNDU1QuZ2V0KCJTQ0FJVDQiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIGFpdDVDQUNDU1QgPSBDQUNDU1QuZ2V0KCJTQ0FJVDUiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIGFpdDZDQUNDU1QgPSBDQUNDU1QuZ2V0KCJTQ0FJVDYiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIGFpdDdDQUNDU1QgPSBDQUNDU1QuZ2V0KCJTQ0FJVDciKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiYWl0MUNBQ0NTVD0iICsgYWl0MUNBQ0NTVCArICIgYWl0MkNBQ0NTVD0iICsgYWl0MkNBQ0NTVCk7DQogICAgfQ0KDQogICAgU3RyaW5nIGluYm4gPSBjcmVhdGVBUFM0NTBNSUhlYWRlcihkaXZpLCB5ZWE0LCB2c2VyLCB2b25vLCBnZXRBY2NvdW50aW5nRGF0ZShkaXZpLGFjZHQpKTsNCiAgICBpZiAoaW5ibiAhPSBudWxsICYmICFpbmJuLmlzRW1wdHkoKSkgew0KICAgICAgaWYgKHZ0eHQubGVuZ3RoKCkgPT0gNDApIHsNCiAgICAgICAgdnR4dCA9IHZ0eHQuc3Vic3RyaW5nKDAsIDM4KSArICJYIjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHZ0eHQgPSBmb3JtYXRGaXhlZExlbih2dHh0LCAzOSkgKyAiWCI7DQogICAgICB9DQogICAgICBjcmVhdGVBUFM0NTBNSUxpbmUoZGl2aSwgaW5ibiwgKGN1YW0udG9Eb3VibGUoKSAqICgtMSkpLnRvU3RyaW5nKCksIHZ0Y2QsIChhY3F0LnRvRG91YmxlKCkgKiAoLTEpKS50b1N0cmluZygpLCBhaXQxLCBhaXQyLCBhaXQzLCBhaXQ0LCBhaXQ1LCBhaXQ2LCBhaXQ3LCB2dHh0KTsNCiAgICAgIGNyZWF0ZUFQUzQ1ME1JTGluZShkaXZpLCBpbmJuLCBjdWFtLCB2dGNkLCBhY3F0LCBhaXQxQ0FDQ1NULCBhaXQyQ0FDQ1NULCBhaXQzQ0FDQ1NULCBhaXQ0Q0FDQ1NULCBhaXQ1Q0FDQ1NULCBhaXQ2Q0FDQ1NULCBhaXQ3Q0FDQ1NULCB2dHh0KTsNCiAgICAgIHZhbGlkYXRlQVBTNDU1TUlWYWxpZEJ5QmF0Y2hObyhkaXZpLCBpbmJuKTsNCiAgICAgIHVwZGF0ZVByb2Nlc3NGbGFnKGRpdmksIHllYTQsIGpybm8sIGpzbm8sICIxIik7DQogICAgICBsb2dnZXIuZGVidWcoIlN1Y2Nlc3NmdWwgcmVjb2RlIGZvciBQTyBsaW5lLSIgICsgcHVubyArICIvIiArIHBubGkgKyAiLyIgKyBwbmxzICsgIiBhbmQgZGl2aXNpb24tIiArIGRpdmkgKyAiLCBzdXBwbGllci0iICsgc3VubyArICIsIGludm9pY2UtIiArIHNpbm8pOw0KICAgIH0gZWxzZSB7DQogICAgICB1cGRhdGVQcm9jZXNzRmxhZyhkaXZpLCB5ZWE0LCBqcm5vLCBqc25vLCAiMiIpOw0KICAgICAgbG9nZ2VyLmRlYnVnKCJBUFM0NTBNSSBBZGRIZWFkUmVjb2RlIGZhaWxlZCBmb3IgUE8gbGluZS0iICArIHB1bm8gKyAiLyIgKyBwbmxpICsgIi8iICsgcG5scyArICIgYW5kIGRpdmlzaW9uLSIgKyBkaXZpICsgIiwgc3VwcGxpZXItIiArIHN1bm8gKyAiLCBpbnZvaWNlLSIgKyBzaW5vKTsNCiAgICB9DQogIH0NCiAgDQogIC8qKg0KICAgKiBsc3RGR0lOQUUgLSBDYWxsYmFjayBmdW5jdGlvbiB0byByZXR1cm4gRkdJTkFFIHJlY29yZHMNCiAgICoNCiAgKi8NCiAgQ2xvc3VyZTw/PiBsc3RGR0lOQUUgPSB7IERCQ29udGFpbmVyIEZHSU5BRSAtPg0KICAgIA0KICAgIHB1bm8gID0gRkdJTkFFLmdldCgiRjlQVU5PIikudG9TdHJpbmcoKTsNCiAgICBwbmxpICA9IEZHSU5BRS5nZXQoIkY5UE5MSSIpLnRvU3RyaW5nKCk7DQogICAgcG5scyAgPSBGR0lOQUUuZ2V0KCJGOVBOTFMiKS50b1N0cmluZygpOw0KICAgIGxvZ2dlci5kZWJ1ZygiUFVOTz0iICsgcHVubyArICIgUE5MST0iICsgcG5saSk7DQogIH0NCiAgLyoqDQogICAqIGNyZWF0ZUFQUzQ1ME1JSGVhZGVyIC0gZXhlY3V0aW5nIEFQUzQ1ME1JLkFkZEhlYWRSZWNvZGUNCiAgICoNCiAgKi8NCiAgU3RyaW5nIGNyZWF0ZUFQUzQ1ME1JSGVhZGVyKFN0cmluZyBkaXZpLCBTdHJpbmcgeWVhNCwgU3RyaW5nIHZzZXIsIFN0cmluZyB2b25vLCBTdHJpbmcgYWNkdCkgew0KICAgIGxvZ2dlci5kZWJ1ZygiQ2FsbCBBUFM0NTBNSS5BZGRIZWFkUmVjb2RlLi4uIik7DQogICAgDQogICAgU3RyaW5nIGluYm4gPSAiIjsNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHBhcmFtcyA9IFsgIkRJVkkiOiBkaXZpLCAiWUVBNCI6IHllYTQsICJWU0VSIjogdnNlciwgIlZPTk8iOiB2b25vLCAiQUNEVCI6IGFjZHRdOyANCiAgICANCiAgICBDbG9zdXJlPD8+IGNhbGxiYWNrID0gew0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiByZXNwb25zZSAtPg0KICAgICAgaW5ibiA9IHJlc3BvbnNlLklOQk47DQogICAgICBsb2dnZXIuZGVidWcoIklOQk49IiArIGluYm4pOw0KICAgIH0NCiAgICANCiAgICBtaUNhbGxlci5jYWxsKCJBUFM0NTBNSSIsIkFkZEhlYWRSZWNvZGUiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgICANCiAgICByZXR1cm4gaW5ibjsNCiAgfQ0KICAvKioNCiAgICogY3JlYXRlQVBTNDUwTUlMaW5lIC0gZXhlY3V0aW5nIEFQUzQ1ME1JLkFkZExpbmVSZWNvZGUNCiAgICoNCiAgKi8NCiAgdm9pZCBjcmVhdGVBUFM0NTBNSUxpbmUoU3RyaW5nIGRpdmksIFN0cmluZyBpbmJuLCBTdHJpbmcgbmxhbSwgU3RyaW5nIHZ0Y2QsIFN0cmluZyBhY3F0LCBTdHJpbmcgYWl0MSwgU3RyaW5nIGFpdDIsIFN0cmluZyBhaXQzLCBTdHJpbmcgYWl0NCwgU3RyaW5nIGFpdDUsIFN0cmluZyBhaXQ2LCBTdHJpbmcgYWl0NywgU3RyaW5nIHZ0eHQpIHsNCiAgICBsb2dnZXIuZGVidWcoIkNhbGwgQVBTNDUwTUkuQWRkTGluZVJlY29kZS4uLiIpOw0KICAgIA0KICAgIA0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zID0gWyAiRElWSSI6IGRpdmksICJJTkJOIjogaW5ibiwgIk5MQU0iOiBubGFtLCAiVlRDRCI6IHZ0Y2QsICJBQ1FUIjogYWNxdCwgIkFJVDEiOiBhaXQxLCAiQUlUMiI6IGFpdDIsICJBSVQzIjogYWl0MywgIkFJVDQiOiBhaXQ0LCAiQUlUNSI6IGFpdDUsICJBSVQ2IjogYWl0NiwgIkFJVDciOiBhaXQ3LCAiVlRYVCI6IHZ0eHRdOyANCiAgICBDbG9zdXJlPD8+IGNhbGxiYWNrID0gew0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIA0KICAgIH0NCiAgICANCiAgICBtaUNhbGxlci5jYWxsKCJBUFM0NTBNSSIsIkFkZExpbmVSZWNvZGUiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgfQ0KICAvKioNCiAgICogZm9ybWF0Rml4ZWRMZW5ndGgNCiAgICoNCiAgKi8gIA0KICBTdHJpbmcgZm9ybWF0Rml4ZWRMZW4oU3RyaW5nIHN0ciwgaW50IGxlbikgew0KICAgIFN0cmluZyBzdHJUZW1wID0gc3RyOw0KICAgIHdoaWxlIChzdHJUZW1wLmxlbmd0aCgpIDwgbGVuKSB7DQogICAgICBzdHJUZW1wICs9ICIgIjsNCiAgICB9DQogICAgcmV0dXJuIHN0clRlbXA7DQogIH0NCiAgDQogIC8qKg0KICAgKiB2YWxpZGF0ZUFQUzQ1NU1JVmFsaWRCeUJhdGNoTm8gLSBleGVjdXRpbmcgQVBTNDU1TUkuVmFsaWRCeUJhdGNoTm8NCiAgICoNCiAgKi8NCiAgdm9pZCB2YWxpZGF0ZUFQUzQ1NU1JVmFsaWRCeUJhdGNoTm8oU3RyaW5nIGRpdmksIFN0cmluZyBpbmJuKSB7DQogICAgbG9nZ2VyLmRlYnVnKCJDYWxsIEFQUzQ1NU1JLlZhbGlkQnlCYXRjaE5vLi4uIik7DQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXMgPSBbICJESVZJIjogZGl2aSwgIklOQk4iOiBpbmJuXTsgDQogICAgQ2xvc3VyZTw/PiBjYWxsYmFjayA9IHsNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+DQogICAgDQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIkFQUzQ1NU1JIiwiVmFsaWRCeUJhdGNoTm8iLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgfQ0KICAvKioNCiAgICogdXBkYXRlUHJvY2Vzc0ZsYWcgLSB1cGRhdGUgUFJPQyBpbiBFWFRWQVINCiAgICoNCiAgKi8NCiAgdm9pZCB1cGRhdGVQcm9jZXNzRmxhZyhTdHJpbmcgZGl2aSwgU3RyaW5nIHllYTQsIFN0cmluZyBqcm5vLCBTdHJpbmcganNubywgU3RyaW5nIHByb2MpIHsNCiAgICANCgkgIERCQWN0aW9uIGFjdGlvbkVYVFZBUiA9IGRhdGFiYXNlLnRhYmxlKCJFWFRWQVIiKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIEVYVFZBUiA9IGFjdGlvbkVYVFZBUi5nZXRDb250YWluZXIoKTsNCgkJRVhUVkFSLnNldCgiRVhDT05PIiwgWFhDT05PKTsNCgkJRVhUVkFSLnNldCgiRVhESVZJIiwgZGl2aSk7DQoJCUVYVFZBUi5zZXQoIkVYWUVBNCIsIHllYTQudG9JbnRlZ2VyKCkpOw0KCQlFWFRWQVIuc2V0KCJFWEpSTk8iLCBqcm5vLnRvSW50ZWdlcigpKTsNCgkJRVhUVkFSLnNldCgiRVhKU05PIiwganNuby50b0ludGVnZXIoKSk7DQoJCVBST0MgPSBwcm9jOw0KCQlpZiAoIWFjdGlvbkVYVFZBUi5yZWFkTG9jayhFWFRWQVIsIHVwZGF0ZUVYVFZBUikpIHsNCiAgICAgIHJldHVybjsNCgkJfQ0KICB9DQogIC8qKg0KICAqIHVwZGF0ZUVYVFZBUiAtIENhbGxiYWNrIGZ1bmN0aW9uDQogICoNCiAgKi8NCiAgIENsb3N1cmU8Pz4gdXBkYXRlRVhUVkFSID0geyBMb2NrZWRSZXN1bHQgRVhUVkFSIC0+DQogICAgRVhUVkFSLnNldCgiRVhQUk9DIiwgUFJPQy50b0ludGVnZXIoKSk7DQogICAgRVhUVkFSLnNldCgiRVhMTURUIiwgY3VycmVudERhdGUpOw0KICAJRVhUVkFSLnNldCgiRVhDSE5PIiwgRVhUVkFSLmdldCgiRVhDSE5PIikudG9TdHJpbmcoKS50b0ludGVnZXIoKSArMSk7DQogIAlFWFRWQVIuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSk7DQogICAgRVhUVkFSLnVwZGF0ZSgpOw0KICAgfQ0KICAgDQogIC8qKg0KICAgKiBnZXRJbnZlbnRvcnlBY2NvdW50cyAtIEdldCBBY2NvdW50aW5nIFN0cmluZyBmb3IgSW52ZW50b3J5IEl0ZW0NCiAgICoNCiAgKi8NCiAgTWFwPFN0cmluZywgU3RyaW5nPiBnZXRJbnZlbnRvcnlBY2NvdW50cyhTdHJpbmcgQ29tcGFueSwgU3RyaW5nIERpdmlzaW9uLCBTdHJpbmcgRnJvbURhdGUsIFN0cmluZyBPcmRlck51bWJlciwgU3RyaW5nIE9yZGVyTGluZU51bWJlciwgU3RyaW5nIFB1cmNoYXNlT3JkZXJMaW5lU3VibnVtYmVyKSB7DQogICAgU3RyaW5nIGVuZHBvaW50ID0gIk0zL2lwcy9zZXJ2aWNlL0NSUzM5OSINCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IGhlYWRlcnMgPSBbIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi94bWwiLCAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3htbCJdDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBxdWVyeVBhcmFtZXRlcnMgPSAoTWFwKW51bGwNCiAgICBTdHJpbmcgU09BUEJvZHkgPSAiPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwibm9cIj8+PFNPQVAtRU5WOkVudmVsb3BlIHhtbG5zOlNPQVAtRU5WPVwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS9cIiB4bWxuczpjcmVkPVwiaHR0cDovL2xhd3Nvbi5jb20vd3MvY3JlZGVudGlhbHNcIiB4bWxuczpnZXQ9XCJodHRwOi8vc2NoZW1hcy5pbmZvci5jb20vaXBzL0NSUzM5OS9HZXRQUDEwOTEwXCI+ICA8U09BUC1FTlY6SGVhZGVyPiAgICA8Y3JlZDpsd3M+ICAgICAgPGNyZWQ6Y29tcGFueT4ke0NvbXBhbnl9PC9jcmVkOmNvbXBhbnk+ICAgICAgPGNyZWQ6ZGl2aXNpb24+PC9jcmVkOmRpdmlzaW9uPiAgICA8L2NyZWQ6bHdzPiAgPC9TT0FQLUVOVjpIZWFkZXI+ICA8U09BUC1FTlY6Qm9keT4gICAgPGdldDpHZXRQUDEwOTEwPiAgICAgIDxnZXQ6Q1JTMzk5PiAgICAgICAgPGdldDpEaXZpc2lvbj4ke0RpdmlzaW9ufTwvZ2V0OkRpdmlzaW9uPiAgICAgICAgPGdldDpGcm9tRGF0ZT4ke0Zyb21EYXRlfTwvZ2V0OkZyb21EYXRlPiAgICAgICAgPGdldDpPcmRlck51bWJlcj4ke09yZGVyTnVtYmVyfTwvZ2V0Ok9yZGVyTnVtYmVyPiAgICAgICAgPGdldDpPcmRlckxpbmVOdW1iZXI+JHtPcmRlckxpbmVOdW1iZXJ9PC9nZXQ6T3JkZXJMaW5lTnVtYmVyPiAgICAgICAgPGdldDpQdXJjaGFzZU9yZGVyTGluZVN1Ym51bWJlcj4ke1B1cmNoYXNlT3JkZXJMaW5lU3VibnVtYmVyfTwvZ2V0OlB1cmNoYXNlT3JkZXJMaW5lU3VibnVtYmVyPiAgICAgIDwvZ2V0OkNSUzM5OT4gICAgPC9nZXQ6R2V0UFAxMDkxMD4gIDwvU09BUC1FTlY6Qm9keT48L1NPQVAtRU5WOkVudmVsb3BlPiINCiAgICBJb25SZXNwb25zZSByZXNwb25zZSA9IGlvbi5wb3N0KGVuZHBvaW50LCBoZWFkZXJzLCBxdWVyeVBhcmFtZXRlcnMsIFNPQVBCb2R5KQ0KICAgIGlmIChyZXNwb25zZS5nZXRFcnJvcigpKSB7DQogICAgICBsb2dnZXIuZGVidWcoIkZhaWxlZCBjYWxsaW5nIElPTiBBUEksIGRldGFpbGVkIGVycm9yIG1lc3NhZ2U6ICR7cmVzcG9uc2UuZ2V0RXJyb3JNZXNzYWdlKCl9IikNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gYWNjb3VudHMgPSBbICJBSVQxIjogIiIsICJBSVQyIjoiIiwgIkFJVDMiOiIiLCAiQUlUNCI6IiIsICJBSVQ1IjoiIiwgIkFJVDYiOiIiLCAiQUlUNyI6IiJdOw0KICAgICAgcmV0dXJuIGFjY291bnRzOyAgDQogICAgfQ0KICAgIGlmIChyZXNwb25zZS5nZXRTdGF0dXNDb2RlKCkgIT0gMjAwKSB7DQogICAgICBsb2dnZXIuZGVidWcoIkV4cGVjdGVkIHN0YXR1cyAyMDAgYnV0IGdvdCAke3Jlc3BvbnNlLmdldFN0YXR1c0NvZGUoKX0gaW5zdGVhZCIpDQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IGFjY291bnRzID0gWyAiQUlUMSI6ICIiLCAiQUlUMiI6IiIsICJBSVQzIjoiIiwgIkFJVDQiOiIiLCAiQUlUNSI6IiIsICJBSVQ2IjoiIiwgIkFJVDciOiIiXTsNCiAgICAgIHJldHVybiBhY2NvdW50czsgIA0KICAgIH0NCg0KICAgIFN0cmluZyBjb250ZW50ID0gcmVzcG9uc2UuZ2V0Q29udGVudCgpDQogICAgaWYgKGNvbnRlbnQgPT0gbnVsbCkgew0KICAgICAgbG9nZ2VyLmRlYnVnKCJFeHBlY3RlZCBjb250ZW50IGZyb20gdGhlIHJlcXVlc3QgYnV0IGdvdCBubyBjb250ZW50IikNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gIGFjY291bnRzID0gWyAiQUlUMSI6ICIiLCAiQUlUMiI6IiIsICJBSVQzIjoiIiwgIkFJVDQiOiIiLCAiQUlUNSI6IiIsICJBSVQ2IjoiIiwgIkFJVDciOiIiXTsNCiAgICAgIHJldHVybiBhY2NvdW50czsgIA0KICAgIH0NCiAgICBTdHJpbmcgcmVzcG9uc2VDb250ZW50ID0gIG5ldyBYbWxTbHVycGVyKCkucGFyc2VUZXh0KGNvbnRlbnQpIDsNCg0KICAgIFN0cmluZyBBSVQxID0gIiI7DQogICAgU3RyaW5nIEFJVDIgPSAiIjsNCiAgICBTdHJpbmcgQUlUMyA9ICIiOw0KICAgIFN0cmluZyBBSVQ0ID0gIiI7DQogICAgU3RyaW5nIEFJVDUgPSAiIjsNCiAgICBTdHJpbmcgQUlUNiA9ICIiOw0KICAgIFN0cmluZyBBSVQ3ID0gIiI7DQogICAgDQogICAgICBTdHJpbmcgcmVzcG9uc2VCb2R5ID0gY29udGVudC50b1N0cmluZygpOw0KICAgICAgaW50IGluZGV4U3RhcnQgPSByZXNwb25zZUJvZHkuaW5kZXhPZigiQWNjb3VudGluZ0RpbWVuc2lvbjE+Iik7DQogICAgICBpbnQgaW5kZXhFbmQgPSAwOw0KICAgICAgaWYgKGluZGV4U3RhcnQgIT0tMSl7DQogICAgICAgICBBSVQxPXJlc3BvbnNlQm9keS5zdWJzdHJpbmcoaW5kZXhTdGFydCsyMCk7DQogICAgICAgICBpbmRleEVuZD1BSVQxLmluZGV4T2YoIjwiKTsNCiAgICAgICAgIEFJVDE9QUlUMS5zdWJzdHJpbmcoMSxpbmRleEVuZCk7DQogICAgICB9DQogICAgICBpbmRleFN0YXJ0ID0gcmVzcG9uc2VCb2R5LmluZGV4T2YoIkFjY291bnRpbmdEaW1lbnNpb24yPiIpOw0KICAgICAgaW5kZXhFbmQgPSAwOw0KICAgICAgaWYgKGluZGV4U3RhcnQgIT0tMSl7DQogICAgICAgICBBSVQyPXJlc3BvbnNlQm9keS5zdWJzdHJpbmcoaW5kZXhTdGFydCsyMCk7DQogICAgICAgICBpbmRleEVuZD1BSVQyLmluZGV4T2YoIjwiKTsNCiAgICAgICAgIEFJVDI9QUlUMi5zdWJzdHJpbmcoMSxpbmRleEVuZCk7DQogICAgICB9DQogICAgICBpbmRleFN0YXJ0ID0gcmVzcG9uc2VCb2R5LmluZGV4T2YoIkFjY291bnRpbmdEaW1lbnNpb24zPiIpOw0KICAgICAgaW5kZXhFbmQgPSAwOw0KICAgICAgaWYgKGluZGV4U3RhcnQgIT0tMSl7DQogICAgICAgICBBSVQzPXJlc3BvbnNlQm9keS5zdWJzdHJpbmcoaW5kZXhTdGFydCsyMCk7DQogICAgICAgICBpbmRleEVuZD1BSVQzLmluZGV4T2YoIjwiKTsNCiAgICAgICAgIEFJVDM9QUlUMy5zdWJzdHJpbmcoMSxpbmRleEVuZCk7DQogICAgICB9DQogICAgICBpbmRleFN0YXJ0ID0gcmVzcG9uc2VCb2R5LmluZGV4T2YoIkFjY291bnRpbmdEaW1lbnNpb240PiIpOw0KICAgICAgaW5kZXhFbmQgPSAwOw0KICAgICAgaWYgKGluZGV4U3RhcnQgIT0tMSl7DQogICAgICAgICBBSVQ0PXJlc3BvbnNlQm9keS5zdWJzdHJpbmcoaW5kZXhTdGFydCsyMCk7DQogICAgICAgICBpbmRleEVuZD1BSVQ0LmluZGV4T2YoIjwiKTsNCiAgICAgICAgIEFJVDQ9QUlUNC5zdWJzdHJpbmcoMSxpbmRleEVuZCk7DQogICAgICB9DQogICAgICBpbmRleFN0YXJ0ID0gcmVzcG9uc2VCb2R5LmluZGV4T2YoIkFjY291bnRpbmdEaW1lbnNpb241PiIpOw0KICAgICAgaW5kZXhFbmQgPSAwOw0KICAgICAgaWYgKGluZGV4U3RhcnQgIT0tMSl7DQogICAgICAgICBBSVQ1PXJlc3BvbnNlQm9keS5zdWJzdHJpbmcoaW5kZXhTdGFydCsyMCk7DQogICAgICAgICBpbmRleEVuZD1BSVQ1LmluZGV4T2YoIjwiKTsNCiAgICAgICAgIEFJVDU9QUlUNS5zdWJzdHJpbmcoMSxpbmRleEVuZCk7DQogICAgICB9DQogICAgICBpbmRleFN0YXJ0ID0gcmVzcG9uc2VCb2R5LmluZGV4T2YoIkFjY291bnRpbmdEaW1lbnNpb242PiIpOw0KICAgICAgaW5kZXhFbmQgPSAwOw0KICAgICAgaWYgKGluZGV4U3RhcnQgIT0tMSl7DQogICAgICAgICBBSVQ2PXJlc3BvbnNlQm9keS5zdWJzdHJpbmcoaW5kZXhTdGFydCsyMCk7DQogICAgICAgICBpbmRleEVuZD1BSVQ2LmluZGV4T2YoIjwiKTsNCiAgICAgICAgIEFJVDY9QUlUNi5zdWJzdHJpbmcoMSxpbmRleEVuZCk7DQogICAgICB9DQogICAgICBpbmRleFN0YXJ0ID0gcmVzcG9uc2VCb2R5LmluZGV4T2YoIkFjY291bnRpbmdEaW1lbnNpb243PiIpOw0KICAgICAgaW5kZXhFbmQgPSAwOw0KICAgICAgaWYgKGluZGV4U3RhcnQgIT0tMSl7DQogICAgICAgICBBSVQ3PXJlc3BvbnNlQm9keS5zdWJzdHJpbmcoaW5kZXhTdGFydCsyMCk7DQogICAgICAgICBpbmRleEVuZD1BSVQ3LmluZGV4T2YoIjwiKTsNCiAgICAgICAgIEFJVDc9QUlUNy5zdWJzdHJpbmcoMSxpbmRleEVuZCk7DQogICAgICB9DQoNCiAgICBsb2dnZXIuZGVidWcoInJlcG9uc2VDb250ZW50PSIgKyByZXNwb25zZUNvbnRlbnQpOw0KICAgIA0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gYWNjb3VudHMgPSBbICJBSVQxIjogQUlUMSwgIkFJVDIiOkFJVDIsICJBSVQzIjpBSVQzLCAiQUlUNCI6QUlUNCwgIkFJVDUiOkFJVDUsICJBSVQ2IjpBSVQ2LCAiQUlUNyI6QUlUN107DQogICAgcmV0dXJuIGFjY291bnRzOyAgDQogIH0NCiAgDQogIC8qKg0KICAgKiBnZXRXb3JrT3JkZXJBY2NvdW50cyAtIEdldCBBY2NvdW50aW5nIFN0cmluZyBmb3IgV29yayBPcmRlciBsaW5lcw0KICAgKg0KICAqLw0KICBNYXA8U3RyaW5nLCBTdHJpbmc+IGdldFdvcmtPcmRlckFjY291bnRzKFN0cmluZyBDb21wYW55LCBTdHJpbmcgRGl2aXNpb24sIFN0cmluZyBGcm9tRGF0ZSwgU3RyaW5nIEl0ZW1Qcm9kdWN0TnVtYmVyLCBTdHJpbmcgTWFudWZhY3R1cmluZ09yZGVyTnVtYmVyLCBTdHJpbmcgU2VxdWVuY2VOdW1iZXIpIHsNCiAgICBTdHJpbmcgZW5kcG9pbnQgPSAiTTMvaXBzL3NlcnZpY2UvQ1JTMzk5Ig0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gaGVhZGVycyA9IFsiQWNjZXB0IjogImFwcGxpY2F0aW9uL3htbCIsICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veG1sIl0NCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHF1ZXJ5UGFyYW1ldGVycyA9IChNYXApbnVsbA0KICAgIFN0cmluZyBTT0FQQm9keSA9ICI8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJub1wiPz48U09BUC1FTlY6RW52ZWxvcGUgeG1sbnM6U09BUC1FTlY9XCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy9zb2FwL2VudmVsb3BlL1wiIHhtbG5zOmNyZWQ9XCJodHRwOi8vbGF3c29uLmNvbS93cy9jcmVkZW50aWFsc1wiIHhtbG5zOmdldD1cImh0dHA6Ly9zY2hlbWFzLmluZm9yLmNvbS9pcHMvQ1JTMzk5L0dldE1PMTA5MTJcIj4gIDxTT0FQLUVOVjpIZWFkZXI+ICAgIDxjcmVkOmx3cz4gICAgICA8Y3JlZDpjb21wYW55PiR7Q29tcGFueX08L2NyZWQ6Y29tcGFueT4gICAgICA8Y3JlZDpkaXZpc2lvbj48L2NyZWQ6ZGl2aXNpb24+ICAgIDwvY3JlZDpsd3M+ICA8L1NPQVAtRU5WOkhlYWRlcj4gIDxTT0FQLUVOVjpCb2R5PiAgICA8Z2V0OkdldE1PMTA5MTI+ICAgICAgPGdldDpDUlMzOTk+ICAgICAgICA8Z2V0OkRpdmlzaW9uPiR7RGl2aXNpb259PC9nZXQ6RGl2aXNpb24+ICAgICAgICA8Z2V0OkZyb21EYXRlPiR7RnJvbURhdGV9PC9nZXQ6RnJvbURhdGU+ICAgICAgICA8Z2V0Okl0ZW1Qcm9kdWN0TnVtYmVyPiR7SXRlbVByb2R1Y3ROdW1iZXJ9PC9nZXQ6SXRlbVByb2R1Y3ROdW1iZXI+ICAgICAgICA8Z2V0OlNlcXVlbmNlTnVtYmVyPiR7U2VxdWVuY2VOdW1iZXJ9PC9nZXQ6U2VxdWVuY2VOdW1iZXI+ICAgICAgICA8Z2V0Ok1hbnVmYWN0dXJpbmdPcmRlck51bWJlcj4ke01hbnVmYWN0dXJpbmdPcmRlck51bWJlcn08L2dldDpNYW51ZmFjdHVyaW5nT3JkZXJOdW1iZXI+ICAgICAgPC9nZXQ6Q1JTMzk5PiAgICA8L2dldDpHZXRNTzEwOTEyPiAgPC9TT0FQLUVOVjpCb2R5PjwvU09BUC1FTlY6RW52ZWxvcGU+Ig0KICAgIElvblJlc3BvbnNlIHJlc3BvbnNlID0gaW9uLnBvc3QoZW5kcG9pbnQsIGhlYWRlcnMsIHF1ZXJ5UGFyYW1ldGVycywgU09BUEJvZHkpDQogICAgaWYgKHJlc3BvbnNlLmdldEVycm9yKCkpIHsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiRmFpbGVkIGNhbGxpbmcgSU9OIEFQSSwgZGV0YWlsZWQgZXJyb3IgbWVzc2FnZTogJHtyZXNwb25zZS5nZXRFcnJvck1lc3NhZ2UoKX0iKQ0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBhY2NvdW50cyA9IFsgIkFJVDEiOiAiIiwgIkFJVDIiOiIiLCAiQUlUMyI6IiIsICJBSVQ0IjoiIiwgIkFJVDUiOiIiLCAiQUlUNiI6IiIsICJBSVQ3IjoiIl07DQogICAgICByZXR1cm4gYWNjb3VudHM7ICANCiAgICB9DQogICAgaWYgKHJlc3BvbnNlLmdldFN0YXR1c0NvZGUoKSAhPSAyMDApIHsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiRXhwZWN0ZWQgc3RhdHVzIDIwMCBidXQgZ290ICR7cmVzcG9uc2UuZ2V0U3RhdHVzQ29kZSgpfSBpbnN0ZWFkIikNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gYWNjb3VudHMgPSBbICJBSVQxIjogIiIsICJBSVQyIjoiIiwgIkFJVDMiOiIiLCAiQUlUNCI6IiIsICJBSVQ1IjoiIiwgIkFJVDYiOiIiLCAiQUlUNyI6IiJdOw0KICAgICAgcmV0dXJuIGFjY291bnRzOyAgDQogICAgfQ0KICAgIFN0cmluZyBjb250ZW50ID0gcmVzcG9uc2UuZ2V0Q29udGVudCgpDQogICAgaWYgKGNvbnRlbnQgPT0gbnVsbCkgew0KICAgICAgbG9nZ2VyLmRlYnVnKCJFeHBlY3RlZCBjb250ZW50IGZyb20gdGhlIHJlcXVlc3QgYnV0IGdvdCBubyBjb250ZW50IikNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gYWNjb3VudHMgPSBbICJBSVQxIjogIiIsICJBSVQyIjoiIiwgIkFJVDMiOiIiLCAiQUlUNCI6IiIsICJBSVQ1IjoiIiwgIkFJVDYiOiIiLCAiQUlUNyI6IiJdOw0KICAgICAgcmV0dXJuIGFjY291bnRzOyAgDQogICAgfQ0KICAgIFN0cmluZyByZXNwb25zZUNvbnRlbnQgPSAgbmV3IFhtbFNsdXJwZXIoKS5wYXJzZVRleHQoY29udGVudCkgOw0KDQogICAgU3RyaW5nIEFJVDEgPSAiIjsNCiAgICBTdHJpbmcgQUlUMiA9ICIiOw0KICAgIFN0cmluZyBBSVQzID0gIiI7DQogICAgU3RyaW5nIEFJVDQgPSAiIjsNCiAgICBTdHJpbmcgQUlUNSA9ICIiOw0KICAgIFN0cmluZyBBSVQ2ID0gIiI7DQogICAgU3RyaW5nIEFJVDcgPSAiIjsNCiAgICANCiAgICAgIFN0cmluZyByZXNwb25zZUJvZHkgPSBjb250ZW50LnRvU3RyaW5nKCk7DQogICAgICBpbnQgaW5kZXhTdGFydCA9IHJlc3BvbnNlQm9keS5pbmRleE9mKCJBY2NvdW50aW5nRGltZW5zaW9uMT4iKTsNCiAgICAgIGludCBpbmRleEVuZCA9IDA7DQogICAgICBpZiAoaW5kZXhTdGFydCAhPS0xKXsNCiAgICAgICAgIEFJVDE9cmVzcG9uc2VCb2R5LnN1YnN0cmluZyhpbmRleFN0YXJ0KzIwKTsNCiAgICAgICAgIGluZGV4RW5kPUFJVDEuaW5kZXhPZigiPCIpOw0KICAgICAgICAgQUlUMT1BSVQxLnN1YnN0cmluZygxLGluZGV4RW5kKTsNCiAgICAgIH0NCiAgICAgIGluZGV4U3RhcnQgPSByZXNwb25zZUJvZHkuaW5kZXhPZigiQWNjb3VudGluZ0RpbWVuc2lvbjI+Iik7DQogICAgICBpbmRleEVuZCA9IDA7DQogICAgICBpZiAoaW5kZXhTdGFydCAhPS0xKXsNCiAgICAgICAgIEFJVDI9cmVzcG9uc2VCb2R5LnN1YnN0cmluZyhpbmRleFN0YXJ0KzIwKTsNCiAgICAgICAgIGluZGV4RW5kPUFJVDIuaW5kZXhPZigiPCIpOw0KICAgICAgICAgQUlUMj1BSVQyLnN1YnN0cmluZygxLGluZGV4RW5kKTsNCiAgICAgIH0NCiAgICAgIGluZGV4U3RhcnQgPSByZXNwb25zZUJvZHkuaW5kZXhPZigiQWNjb3VudGluZ0RpbWVuc2lvbjM+Iik7DQogICAgICBpbmRleEVuZCA9IDA7DQogICAgICBpZiAoaW5kZXhTdGFydCAhPS0xKXsNCiAgICAgICAgIEFJVDM9cmVzcG9uc2VCb2R5LnN1YnN0cmluZyhpbmRleFN0YXJ0KzIwKTsNCiAgICAgICAgIGluZGV4RW5kPUFJVDMuaW5kZXhPZigiPCIpOw0KICAgICAgICAgQUlUMz1BSVQzLnN1YnN0cmluZygxLGluZGV4RW5kKTsNCiAgICAgIH0NCiAgICAgIGluZGV4U3RhcnQgPSByZXNwb25zZUJvZHkuaW5kZXhPZigiQWNjb3VudGluZ0RpbWVuc2lvbjQ+Iik7DQogICAgICBpbmRleEVuZCA9IDA7DQogICAgICBpZiAoaW5kZXhTdGFydCAhPS0xKXsNCiAgICAgICAgIEFJVDQ9cmVzcG9uc2VCb2R5LnN1YnN0cmluZyhpbmRleFN0YXJ0KzIwKTsNCiAgICAgICAgIGluZGV4RW5kPUFJVDQuaW5kZXhPZigiPCIpOw0KICAgICAgICAgQUlUND1BSVQ0LnN1YnN0cmluZygxLGluZGV4RW5kKTsNCiAgICAgIH0NCiAgICAgIGluZGV4U3RhcnQgPSByZXNwb25zZUJvZHkuaW5kZXhPZigiQWNjb3VudGluZ0RpbWVuc2lvbjU+Iik7DQogICAgICBpbmRleEVuZCA9IDA7DQogICAgICBpZiAoaW5kZXhTdGFydCAhPS0xKXsNCiAgICAgICAgIEFJVDU9cmVzcG9uc2VCb2R5LnN1YnN0cmluZyhpbmRleFN0YXJ0KzIwKTsNCiAgICAgICAgIGluZGV4RW5kPUFJVDUuaW5kZXhPZigiPCIpOw0KICAgICAgICAgQUlUNT1BSVQ1LnN1YnN0cmluZygxLGluZGV4RW5kKTsNCiAgICAgIH0NCiAgICAgIGluZGV4U3RhcnQgPSByZXNwb25zZUJvZHkuaW5kZXhPZigiQWNjb3VudGluZ0RpbWVuc2lvbjY+Iik7DQogICAgICBpbmRleEVuZCA9IDA7DQogICAgICBpZiAoaW5kZXhTdGFydCAhPS0xKXsNCiAgICAgICAgIEFJVDY9cmVzcG9uc2VCb2R5LnN1YnN0cmluZyhpbmRleFN0YXJ0KzIwKTsNCiAgICAgICAgIGluZGV4RW5kPUFJVDYuaW5kZXhPZigiPCIpOw0KICAgICAgICAgQUlUNj1BSVQ2LnN1YnN0cmluZygxLGluZGV4RW5kKTsNCiAgICAgIH0NCiAgICAgICAgICAgIGluZGV4U3RhcnQgPSByZXNwb25zZUJvZHkuaW5kZXhPZigiQWNjb3VudGluZ0RpbWVuc2lvbjc+Iik7DQogICAgICBpbmRleEVuZCA9IDA7DQogICAgICBpZiAoaW5kZXhTdGFydCAhPS0xKXsNCiAgICAgICAgIEFJVDc9cmVzcG9uc2VCb2R5LnN1YnN0cmluZyhpbmRleFN0YXJ0KzIwKTsNCiAgICAgICAgIGluZGV4RW5kPUFJVDcuaW5kZXhPZigiPCIpOw0KICAgICAgICAgQUlUNz1BSVQ3LnN1YnN0cmluZygxLGluZGV4RW5kKTsNCiAgICAgIH0NCg0KICAgIGxvZ2dlci5kZWJ1ZygicmVwb25zZUNvbnRlbnQ9IiArIHJlc3BvbnNlQ29udGVudCk7DQogICAgDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiAgYWNjb3VudHMgPSBbICJBSVQxIjogQUlUMSwgIkFJVDIiOkFJVDIsICJBSVQzIjpBSVQzLCAiQUlUNCI6QUlUNCwgIkFJVDUiOkFJVDUsICJBSVQ2IjpBSVQ2LCAiQUlUNyI6QUlUN107DQogICAgcmV0dXJuIGFjY291bnRzOw0KICB9DQogIA0KICAvKioNCiAgICogZ2V0UmVwU3ViV29ya09yZGVyQWNjb3VudHMgLSBHZXQgQWNjb3VudGluZyBTdHJpbmcgZm9yIFJlcGFpciBvciBTdWJjb250cmFjdCBXb3JrIE9yZGVyIGxpbmVzDQogICAqDQogICovDQogIE1hcDxTdHJpbmcsIFN0cmluZz4gZ2V0UmVwU3ViV29ya09yZGVyQWNjb3VudHMoU3RyaW5nIENvbXBhbnksIFN0cmluZyBEaXZpc2lvbiwgU3RyaW5nIEZyb21EYXRlLCBTdHJpbmcgSXRlbVByb2R1Y3ROdW1iZXIsIFN0cmluZyBNYW51ZmFjdHVyaW5nT3JkZXJOdW1iZXIsIFN0cmluZyBPcGVyYXRpb25OdW1iZXIsIFN0cmluZyBGYWNpbGl0eSwgU3RyaW5nIFJld29yaykgew0KICAgIFN0cmluZyBlbmRwb2ludCA9ICJNMy9pcHMvc2VydmljZS9DUlMzOTkiDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiBoZWFkZXJzID0gWyJBY2NlcHQiOiAiYXBwbGljYXRpb24veG1sIiwgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94bWwiXQ0KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcXVlcnlQYXJhbWV0ZXJzID0gKE1hcCludWxsDQogICAgU3RyaW5nIFNPQVBCb2R5ID0gIjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cIm5vXCI/PjxTT0FQLUVOVjpFbnZlbG9wZSB4bWxuczpTT0FQLUVOVj1cImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3NvYXAvZW52ZWxvcGUvXCIgeG1sbnM6Y3JlZD1cImh0dHA6Ly9sYXdzb24uY29tL3dzL2NyZWRlbnRpYWxzXCIgeG1sbnM6Z2V0PVwiaHR0cDovL3NjaGVtYXMuaW5mb3IuY29tL2lwcy9DUlMzOTkvR2V0TU8yMDkyMFwiPiAgPFNPQVAtRU5WOkhlYWRlcj4gICAgPGNyZWQ6bHdzPiAgICAgIDxjcmVkOmNvbXBhbnk+JHtDb21wYW55fTwvY3JlZDpjb21wYW55PiAgICAgIDxjcmVkOmRpdmlzaW9uPjwvY3JlZDpkaXZpc2lvbj4gICAgPC9jcmVkOmx3cz4gIDwvU09BUC1FTlY6SGVhZGVyPiAgPFNPQVAtRU5WOkJvZHk+ICAgIDxnZXQ6R2V0TU8yMDkyMD4gICAgICA8Z2V0OkNSUzM5OT4gICAgICAgIDxnZXQ6RGl2aXNpb24+JHtEaXZpc2lvbn08L2dldDpEaXZpc2lvbj4gICAgICAgIDxnZXQ6RnJvbURhdGU+JHtGcm9tRGF0ZX08L2dldDpGcm9tRGF0ZT4gICAgICAgIDxnZXQ6SXRlbVByb2R1Y3ROdW1iZXI+JHtJdGVtUHJvZHVjdE51bWJlcn08L2dldDpJdGVtUHJvZHVjdE51bWJlcj4gICAgICAgIDxnZXQ6TWFudWZhY3R1cmluZ09yZGVyTnVtYmVyPiR7TWFudWZhY3R1cmluZ09yZGVyTnVtYmVyfTwvZ2V0Ok1hbnVmYWN0dXJpbmdPcmRlck51bWJlcj4gICAgICAgIDxnZXQ6T3BlcmF0aW9uTnVtYmVyPiR7T3BlcmF0aW9uTnVtYmVyfTwvZ2V0Ok9wZXJhdGlvbk51bWJlcj4gICAgICAgIDxnZXQ6RmFjaWxpdHk+JHtGYWNpbGl0eX08L2dldDpGYWNpbGl0eT4gICAgICAgIDxnZXQ6UmV3b3JrPiR7UmV3b3JrfTwvZ2V0OlJld29yaz4gICAgICA8L2dldDpDUlMzOTk+ICAgIDwvZ2V0OkdldE1PMjA5MjA+ICA8L1NPQVAtRU5WOkJvZHk+PC9TT0FQLUVOVjpFbnZlbG9wZT4iDQogICAgSW9uUmVzcG9uc2UgcmVzcG9uc2UgPSBpb24ucG9zdChlbmRwb2ludCwgaGVhZGVycywgcXVlcnlQYXJhbWV0ZXJzLCBTT0FQQm9keSkNCiAgICBpZiAocmVzcG9uc2UuZ2V0RXJyb3IoKSkgew0KICAgICAgbG9nZ2VyLmRlYnVnKCJGYWlsZWQgY2FsbGluZyBJT04gQVBJLCBkZXRhaWxlZCBlcnJvciBtZXNzYWdlOiAke3Jlc3BvbnNlLmdldEVycm9yTWVzc2FnZSgpfSIpDQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+ICBhY2NvdW50cyA9IFsgIkFJVDEiOiAiIiwgIkFJVDIiOiIiLCAiQUlUMyI6IiIsICJBSVQ0IjoiIiwgIkFJVDUiOiIiLCAiQUlUNiI6IiIsICJBSVQ3IjoiIl07DQogICAgICByZXR1cm4gYWNjb3VudHM7ICANCiAgICB9DQogICAgaWYgKHJlc3BvbnNlLmdldFN0YXR1c0NvZGUoKSAhPSAyMDApIHsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiRXhwZWN0ZWQgc3RhdHVzIDIwMCBidXQgZ290ICR7cmVzcG9uc2UuZ2V0U3RhdHVzQ29kZSgpfSBpbnN0ZWFkIikNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gIGFjY291bnRzID0gWyAiQUlUMSI6ICIiLCAiQUlUMiI6IiIsICJBSVQzIjoiIiwgIkFJVDQiOiIiLCAiQUlUNSI6IiIsICJBSVQ2IjoiIiwgIkFJVDciOiIiXTsNCiAgICAgIHJldHVybiBhY2NvdW50czsgIA0KICAgIH0NCiAgICBTdHJpbmcgY29udGVudCA9IHJlc3BvbnNlLmdldENvbnRlbnQoKQ0KICAgIGlmIChjb250ZW50ID09IG51bGwpIHsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiRXhwZWN0ZWQgY29udGVudCBmcm9tIHRoZSByZXF1ZXN0IGJ1dCBnb3Qgbm8gY29udGVudCIpDQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+ICBhY2NvdW50cyA9IFsgIkFJVDEiOiAiIiwgIkFJVDIiOiIiLCAiQUlUMyI6IiIsICJBSVQ0IjoiIiwgIkFJVDUiOiIiLCAiQUlUNiI6IiIsICJBSVQ3IjoiIl07DQogICAgICByZXR1cm4gYWNjb3VudHM7ICANCiAgICB9DQogICAgU3RyaW5nIHJlc3BvbnNlQ29udGVudCA9ICBuZXcgWG1sU2x1cnBlcigpLnBhcnNlVGV4dChjb250ZW50KSA7DQoNCiAgICBTdHJpbmcgQUlUMSA9ICIiOw0KICAgIFN0cmluZyBBSVQyID0gIiI7DQogICAgU3RyaW5nIEFJVDMgPSAiIjsNCiAgICBTdHJpbmcgQUlUNCA9ICIiOw0KICAgIFN0cmluZyBBSVQ1ID0gIiI7DQogICAgU3RyaW5nIEFJVDYgPSAiIjsNCiAgICBTdHJpbmcgQUlUNyA9ICIiOw0KICAgIA0KICAgICAgU3RyaW5nIHJlc3BvbnNlQm9keSA9IGNvbnRlbnQudG9TdHJpbmcoKTsNCiAgICAgIGludCBpbmRleFN0YXJ0ID0gcmVzcG9uc2VCb2R5LmluZGV4T2YoIkFjY291bnRpbmdEaW1lbnNpb24xPiIpOw0KICAgICAgaW50IGluZGV4RW5kID0gMDsNCiAgICAgIGlmIChpbmRleFN0YXJ0ICE9LTEpew0KICAgICAgICAgQUlUMT1yZXNwb25zZUJvZHkuc3Vic3RyaW5nKGluZGV4U3RhcnQrMjApOw0KICAgICAgICAgaW5kZXhFbmQ9QUlUMS5pbmRleE9mKCI8Iik7DQogICAgICAgICBBSVQxPUFJVDEuc3Vic3RyaW5nKDEsaW5kZXhFbmQpOw0KICAgICAgfQ0KICAgICAgaW5kZXhTdGFydCA9IHJlc3BvbnNlQm9keS5pbmRleE9mKCJBY2NvdW50aW5nRGltZW5zaW9uMj4iKTsNCiAgICAgIGluZGV4RW5kID0gMDsNCiAgICAgIGlmIChpbmRleFN0YXJ0ICE9LTEpew0KICAgICAgICAgQUlUMj1yZXNwb25zZUJvZHkuc3Vic3RyaW5nKGluZGV4U3RhcnQrMjApOw0KICAgICAgICAgaW5kZXhFbmQ9QUlUMi5pbmRleE9mKCI8Iik7DQogICAgICAgICBBSVQyPUFJVDIuc3Vic3RyaW5nKDEsaW5kZXhFbmQpOw0KICAgICAgfQ0KICAgICAgaW5kZXhTdGFydCA9IHJlc3BvbnNlQm9keS5pbmRleE9mKCJBY2NvdW50aW5nRGltZW5zaW9uMz4iKTsNCiAgICAgIGluZGV4RW5kID0gMDsNCiAgICAgIGlmIChpbmRleFN0YXJ0ICE9LTEpew0KICAgICAgICAgQUlUMz1yZXNwb25zZUJvZHkuc3Vic3RyaW5nKGluZGV4U3RhcnQrMjApOw0KICAgICAgICAgaW5kZXhFbmQ9QUlUMy5pbmRleE9mKCI8Iik7DQogICAgICAgICBBSVQzPUFJVDMuc3Vic3RyaW5nKDEsaW5kZXhFbmQpOw0KICAgICAgfQ0KICAgICAgaW5kZXhTdGFydCA9IHJlc3BvbnNlQm9keS5pbmRleE9mKCJBY2NvdW50aW5nRGltZW5zaW9uND4iKTsNCiAgICAgIGluZGV4RW5kID0gMDsNCiAgICAgIGlmIChpbmRleFN0YXJ0ICE9LTEpew0KICAgICAgICAgQUlUND1yZXNwb25zZUJvZHkuc3Vic3RyaW5nKGluZGV4U3RhcnQrMjApOw0KICAgICAgICAgaW5kZXhFbmQ9QUlUNC5pbmRleE9mKCI8Iik7DQogICAgICAgICBBSVQ0PUFJVDQuc3Vic3RyaW5nKDEsaW5kZXhFbmQpOw0KICAgICAgfQ0KICAgICAgaW5kZXhTdGFydCA9IHJlc3BvbnNlQm9keS5pbmRleE9mKCJBY2NvdW50aW5nRGltZW5zaW9uNT4iKTsNCiAgICAgIGluZGV4RW5kID0gMDsNCiAgICAgIGlmIChpbmRleFN0YXJ0ICE9LTEpew0KICAgICAgICAgQUlUNT1yZXNwb25zZUJvZHkuc3Vic3RyaW5nKGluZGV4U3RhcnQrMjApOw0KICAgICAgICAgaW5kZXhFbmQ9QUlUNS5pbmRleE9mKCI8Iik7DQogICAgICAgICBBSVQ1PUFJVDUuc3Vic3RyaW5nKDEsaW5kZXhFbmQpOw0KICAgICAgfQ0KICAgICAgaW5kZXhTdGFydCA9IHJlc3BvbnNlQm9keS5pbmRleE9mKCJBY2NvdW50aW5nRGltZW5zaW9uNj4iKTsNCiAgICAgIGluZGV4RW5kID0gMDsNCiAgICAgIGlmIChpbmRleFN0YXJ0ICE9LTEpew0KICAgICAgICAgQUlUNj1yZXNwb25zZUJvZHkuc3Vic3RyaW5nKGluZGV4U3RhcnQrMjApOw0KICAgICAgICAgaW5kZXhFbmQ9QUlUNi5pbmRleE9mKCI8Iik7DQogICAgICAgICBBSVQ2PUFJVDYuc3Vic3RyaW5nKDEsaW5kZXhFbmQpOw0KICAgICAgfQ0KICAgICAgICAgICAgaW5kZXhTdGFydCA9IHJlc3BvbnNlQm9keS5pbmRleE9mKCJBY2NvdW50aW5nRGltZW5zaW9uNz4iKTsNCiAgICAgIGluZGV4RW5kID0gMDsNCiAgICAgIGlmIChpbmRleFN0YXJ0ICE9LTEpew0KICAgICAgICAgQUlUNz1yZXNwb25zZUJvZHkuc3Vic3RyaW5nKGluZGV4U3RhcnQrMjApOw0KICAgICAgICAgaW5kZXhFbmQ9QUlUNy5pbmRleE9mKCI8Iik7DQogICAgICAgICBBSVQ3PUFJVDcuc3Vic3RyaW5nKDEsaW5kZXhFbmQpOw0KICAgICAgfQ0KDQogICAgbG9nZ2VyLmRlYnVnKCJyZXBvbnNlQ29udGVudD0iICsgcmVzcG9uc2VDb250ZW50KTsNCiAgICANCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+ICBhY2NvdW50cyA9IFsgIkFJVDEiOiBBSVQxLCAiQUlUMiI6QUlUMiwgIkFJVDMiOkFJVDMsICJBSVQ0IjpBSVQ0LCAiQUlUNSI6QUlUNSwgIkFJVDYiOkFJVDYsICJBSVQ3IjpBSVQ3XTsNCiAgICByZXR1cm4gYWNjb3VudHM7DQogIH0NCiAgLyoNCiAgICogZ2V0QWNjb3VudGluZ0RhdGUgLSBjaGVjayB3aGV0aGVyIEFjY291bnRpbmcgRGF0ZSBpcyB2YWxpZA0KICAgKg0KICAqLw0KICBTdHJpbmcgZ2V0QWNjb3VudGluZ0RhdGUoU3RyaW5nIGRpdmksIFN0cmluZyBhY2R0KSB7DQogICAgDQogICAgREJBY3Rpb24gcXVlcnlDU1lUQUIgPSBkYXRhYmFzZS50YWJsZSgiQ1NZVEFCIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJDVFBBUk0iKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIENTWVRBQiA9IHF1ZXJ5Q1NZVEFCLmdldENvbnRhaW5lcigpOw0KICAgIENTWVRBQi5zZXQoIkNUQ09OTyIsIFhYQ09OTyk7DQogICAgQ1NZVEFCLnNldCgiQ1RESVZJIiwgZGl2aSk7ICAgDQogICAgQ1NZVEFCLnNldCgiQ1RTVENPIiwgIkZGTkMiKTsgICANCiAgICBDU1lUQUIuc2V0KCJDVFNUS1kiLCAiQVAxMDgwMCIpOyAgIA0KICAgIGlmIChxdWVyeUNTWVRBQi5yZWFkKENTWVRBQikpIHsNCiAgICAgIA0KICAgICAgU3RyaW5nIHBhcm0gPSBDU1lUQUIuZ2V0KCJDVFBBUk0iKQ0KICAgICAgU3RyaW5nIGZyZHQgPSBwYXJtLnN1YnN0cmluZygxMywyMSk7DQogICAgICBTdHJpbmcgdG9kdCA9IHBhcm0uc3Vic3RyaW5nKDIxLDI5KTsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiRnJvbSBEYXRlPSIgKyBmcmR0KTsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiVG8gRGF0ZT0iICsgdG9kdCk7DQogICAgICANCiAgICAgIGlmICgoYWNkdC50b0ludGVnZXIoKSA+IHRvZHQudG9JbnRlZ2VyKCkpIHx8IChhY2R0LnRvSW50ZWdlcigpIDwgZnJkdC50b0ludGVnZXIoKSkpIHsNCiAgICAgICAgcmV0dXJuIGZyZHQ7DQogICAgICAgIGxvZ2dlci5kZWJ1ZygiYWNkdD0iICsgZnJkdCk7DQogICAgICB9DQogICAgfQ0KICAgIGxvZ2dlci5kZWJ1ZygiYWNkdD0iICsgYWNkdCk7DQogICAgcmV0dXJuIGFjZHQ7DQogIH0NCn0=\"}}}"}