{"programModules":{"EXT102MI":{"program":"EXT102MI","triggers":{},"transactions":{"UpdPOLine":{"sourceUuid":"2bbbb741-3ce5-453b-ab3b-f2ba6560656a","name":"UpdPOLine","program":"EXT102MI","description":"Update po line","active":true,"multi":false,"modified":1722563824268,"modifiedBy":"RMURRAY","outputFields":[],"inputFields":[{"name":"PUNO","description":"purchase order number","length":10,"mandatory":true,"type":"A"},{"name":"PNLI","description":"purchase order line","length":3,"mandatory":true,"type":"N"},{"name":"PNLS","description":"purchase order line subnumber","length":3,"mandatory":true,"type":"N"},{"name":"CODT","description":"confirmed delivery date","length":8,"mandatory":false,"type":"N"},{"name":"CPPR","description":"confirmed purchase price","length":17,"mandatory":false,"type":"N"},{"name":"TEL1","description":"terms text","length":36,"mandatory":false,"type":"A"},{"name":"EMAL","description":"email address","length":60,"mandatory":false,"type":"A"}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"2bbbb741-3ce5-453b-ab3b-f2ba6560656a":{"uuid":"2bbbb741-3ce5-453b-ab3b-f2ba6560656a","updated":1722563721415,"updatedBy":"RMURRAY","created":1722476495347,"createdBy":"RMURRAY","apiVersion":"0.9","beVersion":"16.0.0.20240520175116.5","language":"GROOVY","codeHash":"50B20C0C2EF0212C95806874E316468D9326E1B5209AAE01E935477A1F914FA0","code":"LyoKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9USUNFICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogKiAgIFRISVMgU09GVFdBUkUgSVMgVEhFIFBST1BFUlRZIE9GIEFORCBDT05UQUlOUyAgICAgICAgICAgICAqCiAqICAgQ09ORklERU5USUFMIElORk9STUFUSU9OIE9GIElORk9SIEFORC9PUiBJVFMgQUZGSUxJQVRFUyAgICoKICogICBPUiBTVUJTSURJQVJJRVMgQU5EIFNIQUxMIE5PVCBCRSBESVNDTE9TRUQgV0lUSE9VVCBQUklPUiAgKgogKiAgIFdSSVRURU4gUEVSTUlTU0lPTi4gTElDRU5TRUQgQ1VTVE9NRVJTIE1BWSBDT1BZIEFORCAgICAgICAqCiAqICAgQURBUFQgVEhJUyBTT0ZUV0FSRSBGT1IgVEhFSVIgT1dOIFVTRSBJTiBBQ0NPUkRBTkNFIFdJVEggICoKICogICBUSEUgVEVSTVMgT0YgVEhFSVIgU09GVFdBUkUgTElDRU5TRSBBR1JFRU1FTlQuICAgICAgICAgICAgKgogKiAgIEFMTCBPVEhFUiBSSUdIVFMgUkVTRVJWRUQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICogICAoYykgQ09QWVJJR0hUIDIwMjAgSU5GT1IuICBBTEwgUklHSFRTIFJFU0VSVkVELiAgICAgICAgICAgKgogKiAgIFRIRSBXT1JEIEFORCBERVNJR04gTUFSS1MgU0VUIEZPUlRIIEhFUkVJTiBBUkUgICAgICAgICAgICAqCiAqICAgVFJBREVNQVJLUyBBTkQvT1IgUkVHSVNURVJFRCBUUkFERU1BUktTIE9GIElORk9SICAgICAgICAgICoKICogICBBTkQvT1IgSVRTIEFGRklMSUFURVMgQU5EIFNVQlNJRElBUklFUy4gQUxMIFJJR0hUUyAgICAgICAgKgogKiAgIFJFU0VSVkVELiAgQUxMIE9USEVSIFRSQURFTUFSS1MgTElTVEVEIEhFUkVJTiBBUkUgICAgICAgICAqCiAqICAgVEhFIFBST1BFUlRZIE9GIFRIRUlSIFJFU1BFQ1RJVkUgT1dORVJTLiAgICAgICAgICAgICAgICAgICoKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiovCiAKaW1wb3J0IGdyb292eS5sYW5nLkNsb3N1cmU7CmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcjsKCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlOwppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7CmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyOwppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZVBhcnNlRXhjZXB0aW9uCmltcG9ydCBqYXZhLnRpbWUuWm9uZUlkOwoKLyoKKk1vZGlmaWNhdGlvbiBhcmVhIC0gTTMKKk5iciAgICAgRGF0ZSAgICAgIFVzZXIgaWQgICBEZXNjcmlwdGlvbgoqRVhUMTAyICAyMDI0MDExNiAgUk1VUlJBWSAgIFVwZGF0ZSBFWFQgYXBpIHRvIGhhbmRsZSBwb3J0YWwgdXBkYXRlcyBhbmQgbG9nZ2luZwoqRVhUMTAyICAyMDI0MDIwNSAgUk1VUlJBWSAgIFZhbGlkYXRpb24gb24gSU9OIEFQSSBjYWxsLiAKKkVYVDEwMiAgMjAyNDA0MTQgIFJNVVJSQVkgICBBZGQgaW4gUE8gTGluZSBjb25maXJtYXRpb24KKkVYVDEwMiAgMjAyNDA1MDEgIFJNVVJSQVkgICBQcmVwYXJlIGZvciBzdWJtaXNzaW9uLCBQUkQgQXBwcm92YWwuCipFWFQxMDIJIDIwMjQwNTE0ICBSTVVSUkFZCSBNYWtpbmcgdXBkYXRlcyBhcyBwZXIgcmV2aWV3IGZlZWRiYWNrLgoqRVhUMTAyICAyMDI0MDcxNyAgUk1VUlJBWSAgIFVwZGF0aW5nIGxvZ2ljLCBjb25zaWRlciBmbGFnIGZvciBQTyBhcHByb3ZhbCBVQ0ExLCBhbmQgU3RhdHVzIHVwZGF0ZSBmb3IgcHJldmlvdXNseSBhcHByb3ZlZCBpdGVtcy4gCiovCgovKgoqIFVwZFBPTGluZQoqLwpwdWJsaWMgY2xhc3MgVXBkUE9MaW5lIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7CgoJcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaTsKCXByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2U7Cglwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXI7Cglwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbTsKCXByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXI7Cglwcml2YXRlIGZpbmFsIElvbkFQSSBpb247CgoJcHJpdmF0ZSBTdHJpbmcgcHVubzsgLypJTlBVVCovCglwcml2YXRlIFN0cmluZyBwbmxpOyAvKklOUFVUKi8KCXByaXZhdGUgU3RyaW5nIHBubHM7IC8qSU5QVVQqLwoJcHJpdmF0ZSBTdHJpbmcgY29kdDsgLypJTlBVVCovCgoJcHJpdmF0ZSBTdHJpbmcgY3BwcjsKCXByaXZhdGUgU3RyaW5nIHNpdGU7Cglwcml2YXRlIFN0cmluZyBwaXRkOwoJcHJpdmF0ZSBTdHJpbmcgcGl0dDsKCXByaXZhdGUgU3RyaW5nIHRlbDE7Cglwcml2YXRlIFN0cmluZyBlbWFsOwoJcHJpdmF0ZSBTdHJpbmcgc3VubzsKCXByaXZhdGUgU3RyaW5nIGl0bm87Cglwcml2YXRlIFN0cmluZyBvcnFhOwoJcHJpdmF0ZSBTdHJpbmcgY3J1ZDsKCXByaXZhdGUgU3RyaW5nIGNoaWQ7Cglwcml2YXRlIFN0cmluZyBjcHBvOwoJcHJpdmF0ZSBTdHJpbmcgY29kbzsKCXByaXZhdGUgU3RyaW5nIHRlbG87CgoJcHJpdmF0ZSBTdHJpbmcgb3JxbzsKCXByaXZhdGUgU3RyaW5nIHB1c3Q7Cglwcml2YXRlIFN0cmluZyBwdXNsOwoJcHJpdmF0ZSBTdHJpbmcgY3VycmVudERhdGVUaW1lOwoKCXByaXZhdGUgaW50IGN1cnJlbnREYXRlOwoJcHJpdmF0ZSBpbnQgY3VycmVudFRpbWU7Cglwcml2YXRlIGludCBYWENPTk87CgoJcHJpdmF0ZSBib29sZWFuIGlzRGF0ZVBhcnNlZDsKCglwdWJsaWMgVXBkUE9MaW5lKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgTG9nZ2VyQVBJIGxvZ2dlciwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgSW9uQVBJIGlvbikgewoJCXRoaXMubWkgPSBtaTsKCQl0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7CgkJdGhpcy5sb2dnZXIgPSBsb2dnZXI7CgkJdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTsKCQl0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXI7IAoJCXRoaXMuaW9uID0gaW9uOyAKCX0KCglwdWJsaWMgdm9pZCBtYWluKCkgewoJCS8qKgoJCSpGZXRjaCBpbnB1dCBmaWVsZHMgZnJvbSBNSQoJCSovCgkJcHVubyA9IG1pLmluRGF0YS5nZXQoIlBVTk8iKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJQVU5PIikudHJpbSgpOyAKCQlpZiAocHVubyA9PSAiPyIpIHsKCQkJcHVubyA9ICIiOwoJCX0gCgkJcG5saSA9IG1pLmluRGF0YS5nZXQoIlBOTEkiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJQTkxJIikudHJpbSgpOyAKCQlpZiAocG5saSA9PSAiPyIpIHsKCQkJcG5saSA9ICIiOwoJCX0gCgkJcG5scyA9IG1pLmluRGF0YS5nZXQoIlBOTFMiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJQTkxTIikudHJpbSgpOyAKCQlpZiAocG5scyA9PSAiPyIpIHsKCQkJcG5scyA9ICIiOwoJCX0KICAgIGNvZHQgPSBtaS5pbkRhdGEuZ2V0KCJDT0RUIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiQ09EVCIpLnRyaW0oKTsgCgkJaWYgKGNvZHQgPT0gIj8iKSB7CgkJCWNvZHQgPSAiIjsKCQl9IAogICAgY3BwciA9IG1pLmluRGF0YS5nZXQoIkNQUFIiKSA9PSBudWxsID8gJycgOiBtaS5pbkRhdGEuZ2V0KCJDUFBSIikudHJpbSgpOyAKCQlpZiAoY3BwciA9PSAiPyIpIHsKCQkJY3BwciA9ICIiOwoJCX0gICAgIAoJCXRlbDEgPSBtaS5pbkRhdGEuZ2V0KCJURUwxIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiVEVMMSIpLnRyaW0oKTsKCQlpZiAodGVsMSA9PSAiPyIpIHsKCQkJdGVsMSA9ICIiOwoJCX0gIAoJCWVtYWwgPSBtaS5pbkRhdGEuZ2V0KCJFTUFMIikgPT0gbnVsbCA/ICcnIDogbWkuaW5EYXRhLmdldCgiRU1BTCIpLnRyaW0oKTsKCQlpZiAoZW1hbCA9PSAiPyIpIHsKCQkJZW1hbCA9ICIiOwoJCX0gCgoJCS8qCgkJKiBTZXQgY29tcGFueSBudW1iZXIKCQkqLwoJCVhYQ09OTz0gcHJvZ3JhbS5MREFaRC5DT05POwoJCS8qCgkJKiBTZXQgcHJvZ3JhbSB1c2VyIGFzIGNoaWQgdXNlcgoJCSovCgkJY2hpZCA9IHByb2dyYW0uZ2V0VXNlcigpOwogICAgLyoKCQkqIFNldCBEYXRlIFZhcmlhYmxlcyB3aXRoIGN1c3RvbWVyIGxvY2FsIHRpbWUgem9uZQoJCSovCgkJWm9uZUlkIHppZCA9IFpvbmVJZC5vZigiQXVzdHJhbGlhL1N5ZG5leSIpOyAKCQljdXJyZW50RGF0ZSA9IExvY2FsRGF0ZS5ub3coemlkKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKTsKCQljdXJyZW50VGltZSA9IEludGVnZXIudmFsdWVPZihMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKSk7CgkJY3VycmVudERhdGVUaW1lID0gIChMb2NhbERhdGUubm93KHppZCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiZGQgTU1NIHl5eXkiKSkgKyAiICIgKyBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIOm1tOnNzIikpKS50b1N0cmluZygpICsgIiBBRVNUIjsgCgoJCS8qCgkJKiBQZXJmb3JtIHZhbGlkYXRpb24gb24gaW5wdXQgdmFyaWFibGVzCgkJKiBOb3RlIHRvIHJldmlld2VyIC0gVmFsaWRhdGlvbiBub3QgcmVxdWlyZWQgb24gSVROTyBvciBTVU5PIGFzIHRoZXNlIGZpZWxkcyBhcmUgcmV0cmlldmVkIGJ5IHRoZSBhcGkgUFBTMjAwTUlfR2V0TGluZQoJCSovCgkJaWYgKCF2YWxpZGF0ZUlucHV0KCkpIHsKCQkJcmV0dXJuOwoJCX0KCgkJLyoKCQkqIFJldHJpZXZlIHB1cmNoYXNlIG9yZGVyIGxpbmUgaW5mb3JtYXRpb24gdmlhIEFQSSBQUFMyMDBNSV9HZXRMaW5lCgkJKi8KICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zR2V0UE9MaW5lID0gWyAiUFVOTyI6IHB1bm8sICAiUE5MSSI6IHBubGksICJQTkxTIjogcG5scyBdOwogICAgbWlDYWxsZXIuY2FsbCgiUFBTMDAxTUkiLCJHZXRMaW5lIiwgcGFyYW1zR2V0UE9MaW5lLCBjYWxsYmFja0dldFBPTGluZSk7CiAgICAKICAgIGlmKGlzU3RyaW5nTnVsbE9yRW1wdHkoaXRubykgfHwgaXNTdHJpbmdOdWxsT3JFbXB0eShwdXN0KSB8fCBpc1N0cmluZ051bGxPckVtcHR5KHB1c2wpKXsKICAgICAgbWkuZXJyb3IoIkVycm9yLCBQTyBMaW5lIG5vdCBmb3VuZCAiICsgcHVubyArICIgIiArIHBubGkgKyAiICIgKyBwbmxzKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYoIWlzU3RyaW5nTnVsbE9yRW1wdHkocHVzdCkgJiYgIWlzU3RyaW5nTnVsbE9yRW1wdHkocHVzbCkpewogICAgICBpZihwdXN0LnRvSW50ZWdlcigpID4gNzAgfHwgcHVzbC50b0ludGVnZXIoKSA+IDM1IHx8IHB1c2wudG9JbnRlZ2VyKCkgPCAxMil7CiAgICAgICAgbWkuZXJyb3IoIkVycm9yLCBpbmNvcnJlY3Qgc3RhdHVzIFBVU0w6IiArIHB1c2wgKyAiIFBVU1Q6IiArIHB1c3QpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQoKCSAgaWYocHVzbC50b0ludGVnZXIoKSA9PSAzNSl7CiAgCQlNYXA8U3RyaW5nLCBTdHJpbmc+IHBhcmFtc0RlbFBPVHJhbnMgPSBbICJQVU5PIjogcHVubywgIlBOTEkiOiBwbmxpLCAiUFVPUyI6IHB1c2wudHJpbSgpIF07CiAgICAgIG1pQ2FsbGVyLmNhbGwoIlBQUzMzME1JIiwiRGVsUE9UcmFucyIsIHBhcmFtc0RlbFBPVHJhbnMsIHt9KTsKICAgIH07CiAgICAKICAgIC8qCiAgICAgKiBDYWxsZWQgSU9OIGZvciBVcGRhdGUgYXMgUFBTMjAwTUkgdGhyb3VnaCBNSUNhbGxlciBjYXVzZXMgbG9jay4KICAgICovCiAgICBTdHJpbmcgdXJsID0gIi9NMy9tM2FwaS1yZXN0L3YyL2V4ZWN1dGUvUFBTMjAwTUkvVXBkTGluZSI7CiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHBhcmFtcyA9IFsgIlBVTk8iOiBwdW5vLCAgIlBOTEkiOiBwbmxpLCAiUE5MUyI6IHBubHMsICJVQ0ExIjoiWSIgXTsKICAgIGlmKCFjcHByLmlzRW1wdHkoKSl7CiAgICAgIHBhcmFtcy5wdXQoIlBVUFIiLCBjcHByKTsKICAgIH0KICAgIGlmKCFjb2R0LmlzRW1wdHkoKSl7CiAgICAgIHBhcmFtcy5wdXQoIkNPRFQiLCBjb2R0KTsKICAgIH0KICAgIGlmKCF0ZWwxLmlzRW1wdHkoKSl7CiAgICAgIHBhcmFtcy5wdXQoIlRFTDEiLCB0ZWwxKTsKICAgIH0KICAgIE1hcDxTdHJpbmcsU3RyaW5nPiBoZWFkZXJzID0gWyJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiJdOwogICAgSW9uUmVzcG9uc2UgcmVzcG9uc2UgPSBpb24uZ2V0KHVybCwgaGVhZGVycywgcGFyYW1zKTsKICAgIGxvZ2dlci5pbmZvKCJyZXNwb25zZSAke3Jlc3BvbnNlfSIpOwogICAgaWYocmVzcG9uc2UuZ2V0RXJyb3IoKSl7CiAgICAgIG1pLmVycm9yKHJlc3BvbnNlLmdldEVycm9yTWVzc2FnZSgpKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIERCQWN0aW9uIGFjdGlvbk1QTElORSA9IGRhdGFiYXNlLnRhYmxlKCJNUExJTkUiKS5pbmRleCgiMDAiKS5idWlsZCgpOwogICAgREJDb250YWluZXIgTVBMSU5FID0gYWN0aW9uTVBMSU5FLmdldENvbnRhaW5lcigpOwogICAgTVBMSU5FLnNldCgiSUJDT05PIiwgWFhDT05PKTsKICAgIE1QTElORS5zZXQoIklCUFVOTyIsIHB1bm8pOwogICAgTVBMSU5FLnNldCgiSUJQTkxJIiwgcG5saS50b0ludGVnZXIoKSk7CiAgICBNUExJTkUuc2V0KCJJQlBOTFMiLCBwbmxzLnRvSW50ZWdlcigpKTsKICAgIGlmICghYWN0aW9uTVBMSU5FLnJlYWRMb2NrKE1QTElORSwgdXBkYXRlTVBMSU5FKSl7CiAgICAgIG1pLmVycm9yKCJSZWNvcmQgZG9lcyBub3QgZXhpc3RzIik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHBhcmFtc0NvbmZpcm1MaW5lID0gWyAiUFVOTyI6IHB1bm8sICAiUE5MSSI6IHBubGksICJQTkxTIjogcG5scywgIkNPRFQiOiBjb2R0XTsKICAgIGlmKCFpc1N0cmluZ051bGxPckVtcHR5KGNwcHIpKXsKICAgICAgcGFyYW1zQ29uZmlybUxpbmUucHV0KCJDUFBSIiwgY3Bwcik7CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJQUFMwMDFNSSIsIkNvbmZpcm1MaW5lIiwgcGFyYW1zQ29uZmlybUxpbmUsIG51bGwpOwoKCQl3cml0ZUVYVCgpOwoKCX0KCQoJCgkvKgogICAqIHVwZGF0ZUVYVE1BVCAtIENhbGxiYWNrIGZ1bmN0aW9uIHRvIHVwZGF0ZSBFWFRNQVQgdGFibGUKICAgKgogICAqLwoJQ2xvc3VyZTw/PiB1cGRhdGVNUExJTkUgPSB7IExvY2tlZFJlc3VsdCBNUExJTkUgLT4KICAgIFpvbmVJZCB6aWQgPSBab25lSWQub2YoIkF1c3RyYWxpYS9TeWRuZXkiKTsgCiAgICBpbnQgY3VycmVudERhdGUgPSBMb2NhbERhdGUubm93KHppZCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCk7CiAgICBpbnQgY291bnRlciA9IE1QTElORS5nZXQoIklCQ0hOTyIpLnRvU3RyaW5nKCkudHJpbSgpLnRvSW50ZWdlcigpOwogICAgTVBMSU5FLnNldCgiSUJMTURUIiwgY3VycmVudERhdGUpOwogICAgTVBMSU5FLnNldCgiSUJDSE5PIiwgY291bnRlciArMSk7CiAgICBNUExJTkUuc2V0KCJJQkNISUQiLCBwcm9ncmFtLmdldFVzZXIoKSk7CiAgICBNUExJTkUuc2V0KCJJQlBVU0wiLCAiMjAiKQogICAgTVBMSU5FLnNldCgiSUJVQ0ExIiwgIlkiKTsgIC8qU0VUIEFQUFJPVkFMIEZMQUcgVE8gWSAtIEhBUyBCRUVOIFBSRVZJT1VTTFkgQVBST1ZFRCovCiAgICBNUExJTkUudXBkYXRlKCk7Cgl9CgkKCiAgQ2xvc3VyZTw/PiBjYWxsYmFja0dldFBPTGluZSA9IHsgTWFwPFN0cmluZyxTdHJpbmc+IHJlc3BvbnNlIC0+IAogICAgaXRubyA9IHJlc3BvbnNlLklUTk8udHJpbSgpOwogICAgc3VubyA9IHJlc3BvbnNlLlNVTk8udHJpbSgpOwogICAgb3JxbyA9IHJlc3BvbnNlLk9SUUEudHJpbSgpOwogICAgb3JxYSA9IHJlc3BvbnNlLk9SUUEudHJpbSgpOwogICAgcHVzdCA9IHJlc3BvbnNlLlBVU1QudHJpbSgpOwogICAgcHVzbCA9IHJlc3BvbnNlLlBVU0wudHJpbSgpOwogICAgaWYoIWlzU3RyaW5nTnVsbE9yRW1wdHkoY3BwcikpewogICAgICBTdHJpbmcgY1BQTyA9IHJlc3BvbnNlLkNQUFIudHJpbSgpOwogICAgICBpZighaXNTdHJpbmdOdWxsT3JFbXB0eShjUFBPKSAmJiBjUFBPLnRvRG91YmxlKCkgIT0gY3Bwci50b0RvdWJsZSgpKXsKICAgICAgICBjcHBvID0gY1BQTzsgIAogICAgICB9CiAgICB9CiAgICBpZighaXNTdHJpbmdOdWxsT3JFbXB0eSh0ZWwxKSl7CiAgICAgIFN0cmluZyB0RUxPID0gcmVzcG9uc2UuVEVMMS50cmltKCk7CiAgICAgIGlmKCFpc1N0cmluZ051bGxPckVtcHR5KHRFTE8pICYmIHRFTE8udHJpbSgpICE9IHRlbDEudHJpbSgpKXsKICAgICAgICB0ZWxvID0gdEVMTzsgIAogICAgICB9CiAgICB9CiAgICBpZighaXNTdHJpbmdOdWxsT3JFbXB0eShjb2R0KSl7CiAgICAgIFN0cmluZyBjT0RUID0gcmVzcG9uc2UuQ09EVC50cmltKCk7CiAgICAgIGlmKCFpc1N0cmluZ051bGxPckVtcHR5KGNPRFQpICYmIGNPRFQudG9JbnRlZ2VyKCkgIT0gY29kdC50b0ludGVnZXIoKSl7CiAgICAgICAgY29kbyA9IHJlc3BvbnNlLkNPRFQudHJpbSgpOwogICAgICB9CiAgICB9CiAgfQoKCS8qKioqKioqKioqCgkqIHZhbGlkYXRlSW5wdXQgLSBWYWxpZGF0ZSBhbGwgdGhlIGlucHV0IGZpZWxkcwoJKiBAcmV0dXJuIGZhbHNlIGlmIHRoZXJlIGlzIGFueSBlcnJvcgoJKiAgICAgICAgIHRydWUgaWYgcGFzcyB0aGUgdmFsaWRhdGlvbgoJKi8KCXByaXZhdGUgYm9vbGVhbiB2YWxpZGF0ZUlucHV0KCl7CgoJCS8qCgkJKiBWYWxpZGF0ZSBrZXkgZmllbGRzIHVzZWQgZm9yIGFwaSBjYWxsCgkJKi8KCQlTdHJpbmcgcHVyY2hhc2VPcmRlckxpbmUgPSBpc1N0cmluZ051bGxPckVtcHR5KHB1bm8pID8gIlBVTk8iIDogaXNTdHJpbmdOdWxsT3JFbXB0eShwbmxpKSA/ICJQTkxJIiA6IGlzU3RyaW5nTnVsbE9yRW1wdHkocG5scykgPyAiUE5MUyIgOiAiIjsKCQlpZiAoIWlzU3RyaW5nTnVsbE9yRW1wdHkocHVyY2hhc2VPcmRlckxpbmUpKSB7CgkJCW1pLmVycm9yKCIke3B1cmNoYXNlT3JkZXJMaW5lfSwgbm90IGRlZmluZWQiKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJLyoKCQkqIFZhbGlkYXRlIENPRFQgY29uZmlybWVkIGRhdGUgYXMgZGF0ZSBNb3ZleERhdGUgWURNOCBZWVlZTU1ERAoJCSovCgkJaWYoIWlzU3RyaW5nTnVsbE9yRW1wdHkoY29kdCkpewoJCQl0cnlQYXJzZURhdGUoY29kdCk7CgkJfQoJCQoJCS8qCgkJKiBWYWxpZGF0ZSB1c2VyIGVtYWlsIG5vdCBlbXB0eQoJCSovCgkJaWYoIWlzRW1haWxGb3JtYXQoZW1hbCkpewoJCQltaS5lcnJvcigiSW52YWxpZCBlbWFpbCBhZGRyZXNzIC0gRU1BTCIpOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQkvKgoJCSogVmFsaWRhdGlvbiBTdWNjZXNzZnVsCgkJKi8KCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvKgoJKiB3cml0ZUVYVAoJKiBDcmVhdGUgbG9nIGVudHJ5IGluIHRhYmxlIEVYVFNQWgoJKi8KCXByaXZhdGUgdm9pZCB3cml0ZUVYVCgpIHsKCQlEQkFjdGlvbiBhY3Rpb25FWFRTUFogPSBkYXRhYmFzZS50YWJsZSgiRVhUU1BaIikuYnVpbGQoKTsKCQlEQkNvbnRhaW5lciBFWFRTUFogPSBhY3Rpb25FWFRTUFouZ2V0Q29udGFpbmVyKCk7CgkJRVhUU1BaLnNldCgiRVhDT05PIiwgWFhDT05PKTsKCQlFWFRTUFouc2V0KCJFWFNVTk8iLCBzdW5vKTsKCQlFWFRTUFouc2V0KCJFWElUTk8iLCBpdG5vKTsKCQlFWFRTUFouc2V0KCJFWFBVTk8iLCBwdW5vKTsKCQlFWFRTUFouc2V0KCJFWFBOTEkiLCBwbmxpLnRvSW50ZWdlcigpKTsKCQlFWFRTUFouc2V0KCJFWFBOTFMiLCBwbmxzLnRvSW50ZWdlcigpKTsKCQlFWFRTUFouc2V0KCJFWE9SUUEiLCBvcnFhLnRvRG91YmxlKCkpOwogICAgaWYoIWlzU3RyaW5nTnVsbE9yRW1wdHkob3JxbykpewogICAgICBFWFRTUFouc2V0KCJFWE9SUU8iLCBvcnFvLnRvRG91YmxlKCkpOwogICAgfQoJCWlmKCFpc1N0cmluZ051bGxPckVtcHR5KGNwcG8pKXsgICAgICAKCQkJRVhUU1BaLnNldCgiRVhQVVBSIiwgY3Bwci50b0RvdWJsZSgpKTsKCQkJRVhUU1BaLnNldCgiRVhQVVBPIiwgY3Bwby50b0RvdWJsZSgpKTsJCQkKCQl9CgkJaWYoIWlzU3RyaW5nTnVsbE9yRW1wdHkoY29kbykpewoJCQlFWFRTUFouc2V0KCJFWERXRFQiLCBjb2R0LnRvSW50ZWdlcigpKTsKCQkJRVhUU1BaLnNldCgiRVhEV0RPIiwgY29kby50b0ludGVnZXIoKSk7CgkJfQoJCWlmKCFpc1N0cmluZ051bGxPckVtcHR5KHRlbG8pKXsKCQkJRVhUU1BaLnNldCgiRVhURUwxIiwgdGVsMSk7CgkJCUVYVFNQWi5zZXQoIkVYVEVMTyIsIHRlbG8pOwoJCX0KCQlFWFRTUFouc2V0KCJFWEVNQUwiLCBlbWFsKTsKCQlFWFRTUFouc2V0KCJFWExNRFQiLCBjdXJyZW50RGF0ZS50b0ludGVnZXIoKSk7CgkJRVhUU1BaLnNldCgiRVhMTVRNIiwgY3VycmVudFRpbWUudG9JbnRlZ2VyKCkpOwoJCUVYVFNQWi5zZXQoIkVYQ0hJRCIsIGNoaWQpOwoJCUVYVFNQWi5zZXQoIkVYQ0hOTyIsIDApOyAKCQlFWFRTUFouc2V0KCJFWFJHRFQiLCBjdXJyZW50RGF0ZSk7CgkJRVhUU1BaLnNldCgiRVhSR1RNIiwgY3VycmVudFRpbWUpOwoJCWFjdGlvbkVYVFNQWi5pbnNlcnQoRVhUU1BaLCByZWNvcmRFeGlzdHMpOwoJfQoJCgkvKgoJKiByZWNvcmRFeGlzdHMgLSByZXR1cm4gcmVjb3JkIGFscmVhZHkgZXhpc3RzIGVycm9yIG1lc3NhZ2UgdG8gdGhlIE1JCgkqLwoJQ2xvc3VyZSByZWNvcmRFeGlzdHMgPSB7CgkJbWkuZXJyb3IoIlJlY29yZCBhbHJlYWR5IGV4aXN0cyIpOwoJCXJldHVybjsKCX0KCgkvKioqKioqKioKCSogSGVscGVycwoJKi8KCS8qCgkqIENoZWNrcyBpZiB0aGUgZGF0ZSBpcyBjb3JyZWN0IGZvcm1hdCBmb3IgTW92ZXhEYXRlIFlZWVlNTUREIFlETTgKCSovCglwcml2YXRlIHZvaWQgdHJ5UGFyc2VEYXRlKFN0cmluZyBzdHJpbmdUb1BhcnNlKXsKCQlpZiAoIWlzU3RyaW5nTnVsbE9yRW1wdHkoc3RyaW5nVG9QYXJzZSkpIHsKCQkJaWYoc3RyaW5nVG9QYXJzZS5sZW5ndGgoKSAhPSA4KXsKCQkJCW1pLmVycm9yKCJEYXRlIGxlbmd0aCBtdXN0IGJlIDgiKTsKCQkJCXJldHVybjsKCQkJfQoJCQl0cnkgewoJCQkJTG9jYWxEYXRlLnBhcnNlKHN0cmluZ1RvUGFyc2UsIERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkKCQkJfSBjYXRjaCAoRGF0ZVRpbWVQYXJzZUV4Y2VwdGlvbiBlKSB7CgkJCQltaS5lcnJvcigiSW5jb3JyZWN0IGRhdGUgZm9ybWF0IHl5eXlNTWRkIik7CgkJCQlyZXR1cm47CgkJCX0KCQl9Cgl9CgoJLyoKCSogQ2hlY2tzIGlmIHRoZSBzdHJpbmcgaXMgbnVsbCBvciBlbXB0eS4KCSovCglwcml2YXRlIGJvb2xlYW4gaXNTdHJpbmdOdWxsT3JFbXB0eShTdHJpbmcgc3RyaW5nVG9WYWxpZGF0ZSl7CgkJcmV0dXJuIHN0cmluZ1RvVmFsaWRhdGUgPT0gbnVsbCB8fCBzdHJpbmdUb1ZhbGlkYXRlLmlzRW1wdHkoKTsKCX0KCS8qCgkqIENoZWNrcyBpZiBzdHJpbmcgaXMgbm90IG51bGwgb3IgZW1wdHksIGNvbnRhaW5zIHRoZSBAIHN5bWJvbAoJKiB1bmFibGUgdG8gdXNlIGphdmEudXRpbC5yZWdleCwgdW5hYmxlIHRvIHVzZSBQYXR0ZXJuU3ludGF4RXhjZXB0aW9uCgkqLwoJcHJpdmF0ZSBib29sZWFuIGlzRW1haWxGb3JtYXQoU3RyaW5nIHN0cmluZ1RvVmFsaWRhdGUpewoJCXJldHVybiAhaXNTdHJpbmdOdWxsT3JFbXB0eShzdHJpbmdUb1ZhbGlkYXRlKSAmJiBzdHJpbmdUb1ZhbGlkYXRlLmNvbnRhaW5zKCdAJykgJiYgIWlzU3RyaW5nTnVsbE9yRW1wdHkoc3RyaW5nVG9WYWxpZGF0ZS5zcGxpdCgnQCcpWzBdKSAmJiAhaXNTdHJpbmdOdWxsT3JFbXB0eShzdHJpbmdUb1ZhbGlkYXRlLnNwbGl0KCdAJylbMV0pICYmIHN0cmluZ1RvVmFsaWRhdGUuc3BsaXQoJ0AnKVsxXS5jb250YWlucygnLicpOwoJfQoKfQo="}}}